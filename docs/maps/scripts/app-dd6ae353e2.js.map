{"version":3,"sources":["scripts/app.js"],"names":["initApp","appConfig","db","firebase","database","rootRef","ref","urlBase","toString","angular","element","document","ready","appModule","constant","bootstrap","FBconfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appStart","module","initializeApp","auth","onAuthStateChanged","user","emailVerified","userMarks","DB","userId","uid","list","get","addMark","value","add","removeMark","id","remove","updateRecord","update","factory","$inject","dashboardApi","getRecord","recordId","addRecord","removeRecord","deductionsList","getDeduction","deductionId","createDeduction","updateDeduction","removeDeduction","Auth","$cookies","$state","$q","login","email","password","signInWithEmailAndPassword","signUp","createUserWithEmailAndPassword","logout","signOut","getUser","currentUser","sendEmailVerification","deferred","defer","then","response","resolve","error","reject","promise","applyActionCode","oobCode","verifyPasswordResetCode","sendPasswordResetEmail","confirmPasswordReset","$rootScope","$timeout","url","preloaderActiveClass","child","once","val","params","push","toArray","_","create","obj","map","key","mainSidebar","restrict","replace","templateUrl","controllerAs","controller","$scope","mdSidenavInit","directive","Preloader","class_preloader","querySelector","activation_class","openPreloader","addClass","closePreloader","removeClass","this","$get","provider","outputErrors","$mdDialog","Errors","errors","prototype","inputErrors","merge","$broadcast","alertDialog","title","cancel","message","show","alert","clickOutsideToClose","textContent","ok","createNew","require","link","scope","attrs","ctrls","addModelValidators","ngModel","$validators","input_name","modelValue","viewValue","form","name","$on","ev","$setValidity","has","$setTouched","flashMethods","$mdToast","createAlert","type","delay","position","template","hideDelay","alertSuccess","alertError","alertInfo","confirmPassword","regExp","password_confirmation","$modelValue","$viewValue","dateFilter","moment","defaultDateFormat","item","column","format","filter","mainHeader","vm","user_name","console","log","SignUpController","$location","regExpEmail","determine_result","status","verify_status","content","url_params","search","email_errors","password_erros","registration","signUpForm","equals","$invalid","expire_date","Date","setDate","getDate","put","expires","go","error_type","isNumber","code","split","contains","$apply","confirm_email","current","SignInController","logged_user","$emit","send_again","send_email","simple","ForgotPasswordController","confirmEmailForm","confirm_password","confirmPasswordForm","setMinutes","getMinutes","routerConfig","$stateProvider","state","config","RecordController","$stateParams","defeult_total","m","submit_btn","add_total_input","months","years","current_months_index","month","new_record","total","days_in_month","daysInMonth","year","update_total","add_to_total","save_record","recordForm","$setSubmitted","indexOf","sum_in_day","toFixed","created_at","startOf","toISOString","back","reload","DeductionsListController","marks_list","search_term","current_mark","current_sort","columns","label","sort","searchParams","searchTerm","marksList","deductions","apply_sort","columnName","remove_deduction","confirm","targetEvent","searchFilter","mark","date","result","each","toLowerCase","isValid","length","add_deduction","edit_deduction","DeductionController","deduction","from_state","from_params","set_deduction_date","picker_date","picker_min_date","_d","picker_max_date","endOf","toState","toParams","fromState","fromParams","save_deduction","deductionForm","$setPristine","$setUntouched","DashboardController","items_per_page","sum_amounts","get_sum_amounts","keys","pluck","reduce","memo","num","add_record","edit_record","deductions_list","close_dialog","remove_record","ProfileSettingsController","add_mark","addMarkForm","copy","remove_mark","isEmail","verifyEmail","mode","checkCode","checkParamsCode","runBlock","preloaderClass","bool","headerHide","states_for_anonymous","preventDefault","run","$urlRouterProvider","userLogout","redirect","$window","absUrl","path","redirect_url","location","href","otherwise","$ingector","IndexController","$mdComponentRegistry","toggle","noop","isOpen","when","sideNav","bind","login_animation","httpProviderConfig","$logProvider","$httpProvider","debugEnabled","interceptors","beautifyInterceptor","request","requestError","res","responseError","materialThemeConfig","$mdThemingProvider","primaryBlueMap","extendPalette","500","600","accentGreenMap","A200","A700","contrastDefaultColor","warnRedMap","bgGreyMap","50","definePalette","theme","primaryPalette","accentPalette","warnPalette","backgroundPalette","datepickerConfig","$mdDateLocaleProvider","locale","shortMonths","monthsShort","days","weekdays","shortDays","weekdaysMin","firstDayOfWeek","formatDate","$templateCache"],"mappings":"CAAA,WACE,YA6BA,SAASA,KACPC,EAAUC,GAAWC,SAASC,WAC9BH,EAAUI,QAAWJ,EAAUC,GAAGI,MAClCL,EAAUM,QAAWN,EAAUI,QAAQG,WAEvCC,QAAQC,QAAQC,UAAUC,MAAM,WAC9BC,EAAUC,SAAS,YAAab,GAChCQ,QAAQM,UAAUJ,UAAW,sBAjCjC,GACEK,IACEC,OAAoB,0CACpBC,WAAoB,mCACpBC,YAAoB,0CACpBC,UAAoB,mBACpBC,cAAoB,+BACpBC,kBAAoB,gBAEtBrB,KACAsB,GAAY,EACZV,EAAYJ,QAAQe,OAAO,mBAAoB,YAAa,YAAa,aAAc,aAAc,SAAU,YAAa,aAAc,SAAU,yCAGtJrB,UAASsB,cAAcT,GAGvBb,SAASuB,OAAOC,mBAAmB,SAASC,GAC1C3B,EAAU2B,KAAOA,GAAQA,EAAKC,cAAgBD,EAAe,KAExDL,IACHvB,IACAuB,GAAW,QAiBjB,WACE,YAQA,SAASO,GAAU7B,EAAW8B,GAE5B,GACED,MACAE,EAAS/B,EAAU2B,KAAKK,GAmB1B,OAjBAH,GAAUI,KAAO,WACf,MAAOH,GAAGI,IAAI,SAAWH,EAAS,WAGpCF,EAAUM,QAAU,SAASC,GAC3B,MAAON,GAAGO,IAAI,SAAWN,EAAS,SAAUK,IAG9CP,EAAUS,WAAa,SAASC,GAC9B,MAAOT,GAAGU,OAAO,SAAWT,EAAS,UAAYQ,IAGnDV,EAAUY,aAAe,SAASL,EAAOG,GACvC,MAAOT,GAAGY,OAAO,SAAWX,EAAS,UAAYQ,EAAIH,IAIhDP,EA7BTrB,QACEe,OAAO,mBACPoB,QAAQ,YAAad,GAEvBA,EAAUe,SAAW,YAAa,SA8BpC,WACE,YAQA,SAASC,GAAa7C,EAAW8B,GAE/B,GACEe,MACAd,EAAS/B,EAAU2B,KAAKK,GA0C1B,OAxCAa,GAAaZ,KAAO,WAClB,MAAOH,GAAGI,IAAI,SAAWH,EAAS,UAGpCc,EAAaC,UAAY,SAASC,GAChC,MAAOjB,GAAGI,IAAI,SAAWH,EAAS,SAAWgB,IAG/CF,EAAaG,UAAY,SAASZ,GAChC,MAAON,GAAGO,IAAI,SAAWN,EAAS,QAASK,IAG7CS,EAAaI,aAAe,SAASF,GACnC,MAAOjB,GAAGU,OAAO,SAAWT,EAAS,SAAWgB,IAGlDF,EAAaJ,aAAe,SAASM,EAAUX,GAC7C,MAAON,GAAGY,OAAO,SAAWX,EAAS,SAAWgB,EAAUX,IAG5DS,EAAaK,eAAiB,SAASH,GACrC,MAAOjB,GAAGI,IAAI,SAAWH,EAAS,SAAWgB,EAAW,gBAG1DF,EAAaM,aAAe,SAASJ,EAAUK,GAC7C,MAAOtB,GAAGI,IAAI,SAAWH,EAAS,SAAWgB,EAAW,eAAiBK,IAG3EP,EAAaQ,gBAAkB,SAASN,EAAUX,GAChD,MAAON,GAAGO,IAAI,SAAWN,EAAS,SAAWgB,EAAW,cAAeX,IAGzES,EAAaS,gBAAkB,SAASP,EAAUK,EAAahB,GAC7D,MAAON,GAAGY,OAAO,SAAWX,EAAS,SAAWgB,EAAW,eAAiBK,EAAahB,IAG3FS,EAAaU,gBAAkB,SAASR,EAAUK,GAChD,MAAOtB,GAAGU,OAAO,SAAWT,EAAS,SAAWgB,EAAW,eAAiBK,IAGvEP,EApDTrC,QACEe,OAAO,mBACPoB,QAAQ,eAAgBE,GAE1BA,EAAaD,SAAW,YAAa,SAqDvC,WACE,YAQA,SAASY,GAAKC,EAAUC,EAAQxD,EAAUyD,GAExC,GAAIH,KA+FJ,OA7FAA,GAAKI,MAAQ,SAASC,EAAOC,GAC3B,MAAO5D,GAASuB,OAAOsC,2BAA2BF,EAAOC,IAG3DN,EAAKQ,OAAS,SAASH,EAAOC,GAC5B,MAAO5D,GAASuB,OAAOwC,+BAA+BJ,EAAOC,IAG/DN,EAAKU,OAAS,WACZ,MAAOhE,GAASuB,OAAO0C,WAGzBX,EAAKY,QAAU,WACb,MAAOlE,GAASuB,OAAO4C,aAGzBb,EAAKc,sBAAwB,SAAS3C,GACpC,GACEA,GAAWA,GAAQ6B,EAAKY,UACxBG,EAAWZ,EAAGa,OAWhB,OATA7C,GAAK2C,wBAAwBG,KAC3B,SAASC,GACPH,EAASI,QAAQD,IAEnB,SAASE,GACPL,EAASM,OAAOD,KAIbL,EAASO,SAGlBtB,EAAKuB,gBAAkB,SAASC,GAC9B,GAAIT,GAAWZ,EAAGa,OAWlB,OATAtE,GAASuB,OAAOsD,gBAAgBC,GAASP,KACvC,SAASC,GACPH,EAASI,QAAQD,IAEnB,SAASE,GACPL,EAASM,OAAOD,KAIbL,EAASO,SAGlBtB,EAAKyB,wBAA0B,SAASD,GACtC,GAAIT,GAAWZ,EAAGa,OAWlB,OATAtE,GAASuB,OAAOwD,wBAAwBD,GAASP,KAC/C,SAASC,GACPH,EAASI,QAAQD,IAEnB,SAASE,GACPL,EAASM,OAAOD,KAIbL,EAASO,SAGlBtB,EAAK0B,uBAAyB,SAASrB,GACrC,GAAIU,GAAWZ,EAAGa,OAWlB,OATAtE,GAASuB,OAAOyD,uBAAuBrB,GAAOY,KAC5C,SAASC,GACPH,EAASI,QAAQD,IAEnB,SAASE,GACPL,EAASM,OAAOD,KAIbL,EAASO,SAGlBtB,EAAK2B,qBAAuB,SAASH,EAASlB,GAC5C,GAAIS,GAAWZ,EAAGa,OAWlB,OATAtE,GAASuB,OAAO0D,qBAAqBH,EAASlB,GAAUW,KACtD,SAASC,GACPH,EAASI,QAAQD,IAEnB,SAASE,GACPL,EAASM,OAAOD,KAIbL,EAASO,SAGXtB,EAvGThD,QACEe,OAAO,mBACPoB,QAAQ,OAAQa,GAElBA,EAAKZ,SAAW,WAAY,SAAU,WAAY,SAwGpD,WACE,YAQA,SAASd,GAAGsD,EAAYC,EAAUrF,EAAW2D,GAE3C,GAAI7B,KAoFJ,OAlFAA,GAAGI,IAAM,SAASoD,GAChBF,EAAWG,sBAAqB,EAEhC,IAAIhB,GAAWZ,EAAGa,OAalB,OAXAxE,GAAUI,QAAQoF,MAAMF,GAAKG,KAAK,SAAShB,KACzC,SAASC,GACPH,EAASI,QAAQD,EAASgB,OAC1BL,EAAS,WAAaD,EAAWG,sBAAqB,IAAW,IAEnE,SAASb,GACPH,EAASM,OAAOH,GAChBW,EAAS,WAAaD,EAAWG,sBAAqB,IAAW,KAI9DhB,EAASO,SAGlBhD,EAAGO,IAAM,SAASiD,EAAKK,GACrBP,EAAWG,sBAAqB,EAEhC,IACEhB,GAAWZ,EAAGa,QACdnE,EAAWL,EAAUC,GAAGI,IAAIiF,EAa9B,OAXAjF,GAAIuF,KAAKD,GAAQlB,KACf,SAASC,GACPH,EAASI,QAAQD,GACjBW,EAAS,WAAaD,EAAWG,sBAAqB,IAAW,IAEnE,SAASb,GACPH,EAASM,OAAOH,GAChBW,EAAS,WAAaD,EAAWG,sBAAqB,IAAW,KAI9DhB,EAASO,SAGlBhD,EAAGU,OAAS,SAAS8C,GACnBF,EAAWG,sBAAqB,EAEhC,IACEhB,GAAWZ,EAAGa,QACdnE,EAAWL,EAAUC,GAAGI,IAAIiF,EAa9B,OAXAjF,GAAImC,SAASiC,KACX,SAASC,GACPH,EAASI,QAAQD,GACjBW,EAAS,WAAaD,EAAWG,sBAAqB,IAAW,IAEnE,SAASb,GACPH,EAASM,OAAOH,GAChBW,EAAS,WAAaD,EAAWG,sBAAqB,IAAW,KAI9DhB,EAASO,SAGlBhD,EAAGY,OAAS,SAAS4C,EAAKK,GACxBP,EAAWG,sBAAqB,EAEhC,IACEhB,GAAWZ,EAAGa,QACdnE,EAAWL,EAAUC,GAAGI,IAAIiF,EAa9B,OAXAjF,GAAIqC,OAAOiD,GAAQlB,KACjB,SAASC,GACPH,EAASI,QAAQD,GACjBW,EAAS,WAAaD,EAAWG,sBAAqB,IAAW,IAEnE,SAASb,GACPH,EAASM,OAAOH,GAChBW,EAAS,WAAaD,EAAWG,sBAAqB,IAAW,KAI9DhB,EAASO,SAGXhD,EA5FTtB,QACEe,OAAO,mBACPoB,QAAQ,KAAMb,GAEhBA,EAAGc,SAAW,aAAc,WAAY,YAAa,SA6FvD,WAEE,YAQA,SAASiD,GAAQC,GAEf,GACED,KASF,OAPAA,GAAQE,OAAS,SAASC,GACxB,MAAOF,GAAEG,IAAID,EAAK,SAAS5D,EAAO8D,GAEhC,MADA9D,GAAMG,GAAK2D,EACJ9D,KAIJyD,EAlBTrF,QACEe,OAAO,mBACPoB,QAAQ,UAAWkD,GAErBA,EAAQjD,SAAW,QAmBrB,WAEE,YAQA,SAASuD,KACP,OACEC,SAAU,IACVC,SAAS,EACTC,YAAa,sCACbC,aAAc,UACdC,YAAA,SAAY,SAASC,GACnBA,EAAOC,mBAbblG,QACEe,OAAO,mBACPoF,UAAU,cAAeR,GAE3BA,EAAYvD,cAgBd,WACE,YAMA,SAASgE,KACP,GACEC,GAAkB,cAClBpG,EAAUD,QAAQC,QAAQC,SAASoG,cAAcD,IACjDE,EAAmB,aACnBH,IAEFA,GAAUI,cAAgB,WACxBvG,EAAQwG,SAASF,IAGnBH,EAAUM,eAAiB,WACzBzG,EAAQ0G,YAAYJ,IAGtBK,KAAKC,KAAO,WACV,MAAOT,IApBXpG,QACEe,OAAO,mBACP+F,SAAS,YAAaV,MAwB1B,WAEE,YAQA,SAASW,GAAanC,EAAYoC,EAAW1B,GAK3C,QAAS2B,KACPL,KAAKM,UAJP,GACEH,KA+BF,OAzBAE,GAAOE,UAAUC,YAAc,SAASF,GACtCN,KAAKM,OAASlH,QAAQqH,SAAUH,GAChCtC,EAAW0C,WAAW,UAAWV,KAAKM,SAGxCD,EAAOE,UAAUI,YAAc,SAASL,GACtC,GACEM,GAAU,UACVC,EAAU,UACVC,EAAUR,GAAU,wBAGtB,OAAOF,GAAUW,KACfX,EAAUY,QACPC,qBAAoB,GACpBL,MAAMA,GACNM,YAAYJ,GACZK,GAAGN,KAIVV,EAAaiB,UAAY,WACvB,MAAO,IAAIf,IAGNF,EAxCT/G,QACEe,OAAO,mBACPoB,QAAQ,eAAgB4E,GAE1BA,EAAa3E,SAAW,aAAc,YAAa,QAyCrD,WAEE,YAQA,SAASgF,KACP,OACExB,SAAU,IACVqC,SAAU,WAAY,UACtBC,KAAM,SAASC,EAAOlI,EAASmI,EAAOC,GAWpC,QAASC,KACFC,IAELA,EAAQC,YAAYC,GAAc,SAASC,EAAYC,GACrD,OAAO,IAbX,GAGEJ,GAFAK,EAAaP,EAAM,GACnBI,EAAaL,EAAMS,IAGhBD,KAELL,EAAUF,EAAM,IAAMO,EAAKH,GAU3BH,IAEAH,EAAMW,IAAI,UAAW,SAASC,EAAI7B,GAC3BqB,IAELA,EAAQS,aAAaP,GAAanD,EAAE2D,IAAI/B,EAAQuB,IAChDF,EAAQW,oBAnChBlJ,QACEe,OAAO,mBACPoF,UAAU,cAAeiB,GAE3BA,EAAYhF,cAuCd,WAEE,YAQA,SAAS+G,GAAavE,EAAYwE,EAAU9D,GAE1C,GACE6D,KAuBF,OArBAA,GAAaE,YAAc,SAASC,EAAM5B,EAAS6B,EAAOC,GACxD,MAAOJ,GAASzB,MACZ8B,SAAY,6BAA+BH,EAAM,mCAAqC5B,EAAU,oBAChGgC,UAAYH,GAAS,IACrBC,SAAYA,GAAY,eAK9BL,EAAaQ,aAAe,SAASjC,EAAS6B,EAAOC,GACnD,MAAOL,GAAaE,YAAY,UAAW3B,EAAS6B,EAAOC,IAG7DL,EAAaS,WAAa,SAASlC,EAAS6B,EAAOC,GACjD,MAAOL,GAAaE,YAAY,QAAS3B,EAAS6B,EAAOC,IAG3DL,EAAaU,UAAY,SAASnC,EAAS6B,EAAOC,GAChD,MAAOL,GAAaE,YAAY,OAAQ3B,EAAS6B,EAAOC,IAGnDL,EAhCTnJ,QACEe,OAAO,mBACPoB,QAAQ,eAAgBgH,GAE1BA,EAAa/G,SAAW,aAAc,WAAY,QAiCpD,WAEE,YAQA,SAAS0H,KACP,OACElE,SAAU,IACVqC,SAAU,WAAY,UACtBE,OACE4B,OAAQ,KAEV7B,KAAM,SAASC,EAAOlI,EAASmI,EAAOC,GAEpC,GAEEE,GADAK,EAAOP,EAAM,EAGVO,KAELL,EAAUF,EAAM,IAAMO,EAAKR,EAAMS,MAE7BN,IACFA,EAAQC,YAAYwB,sBAAwB,SAAStB,EAAYC,GAC/D,GACE/G,GAAW8G,GAAcC,EACzBrF,EAAWsF,EAAKtF,SAAS2G,aAAerB,EAAKtF,SAAS4G,UAExD,OAAOtI,KAAU0B,OA7B3BtD,QACEe,OAAO,mBACPoF,UAAU,kBAAmB2D,GAE/BA,EAAgB1H,cAkClB,WAEE,YAOA,SAAS+H,GAAWC,EAAQC,GAC1B,MAAO,UAASC,EAAMC,GACpB,MAAOA,IAA0B,SAAhBA,EAAOjB,KAAkBc,EAAOE,GAAME,OAAOD,EAAOC,QAAUH,GAAqBC,GAPxGH,EAAW/H,SAAW,SAAU,qBAAhCpC,QACGe,OAAO,mBACP0J,OAAO,aAAcN,MAW1B,WAEE,YAQA,SAASO,GAAWlL,GAClB,OACEoG,SAAU,IACVC,SAAS,EACTC,YAAa,oCACbC,aAAc,SACdC,WAAY,WACV,GAAI2E,GAAK/D,IAET+D,GAAGC,UAAYpL,EAAU2B,KAAK0H,KAC9BgC,QAAQC,IAAItL,EAAU2B,QAhB5BnB,QACEe,OAAO,mBACPoF,UAAU,aAAcuE,GAE1BA,EAAWtI,SAAW,gBAmBxB,WACE,YAQA,SAAS2I,GAAiB9E,EAAQ/C,EAAQD,EAAU+H,EAAWhI,EAAMsC,EAAG2F,EAAalE,GA4DnF,QAASmE,GAAiBC,GACxBR,EAAGS,cAAgBD,EACnBR,EAAGnD,MAAU2D,EAAS,yBAA2B,8BACjDR,EAAGU,QAAUF,EAAS,mDAAqD,6GA7D7E,GACER,GAAc/D,KACd0E,EAAcN,EAAUO,SACxB/G,EAAc8G,EAAW9G,OAE3BmG,GAAGxJ,QACHwJ,EAAGM,YAAiBA,EACpBN,EAAGzD,OAAiBH,EAAaiB,YACjC2C,EAAGa,cAAkB,uBAAwB,iBAAkB,iBAC/Db,EAAGc,gBAAkB,iBAAkB,iBAEvCd,EAAGe,aAAe,WAChBf,EAAGgB,WAAW3B,sBAAsBhB,aAAa,wBAAyBhJ,QAAQ4L,OAAOjB,EAAGxJ,KAAKmC,SAAUqH,EAAGxJ,KAAK6I,wBAE/GW,EAAGgB,WAAWE,WAElB5F,EAAOlB,sBAAqB,GAE5B/B,EAAKQ,OAAOmH,EAAGxJ,KAAKkC,MAAOsH,EAAGxJ,KAAKmC,UAAUW,KAC3C,SAASC,GACP+B,EAAOlB,sBAAqB,GAE5B/B,EAAKc,wBAAwBG,KAC3B,WACE,GAAI6H,GAAc,GAAIC,KACtBD,GAAYE,QAAQF,EAAYG,UAAY,GAE5ChJ,EAASiJ,IAAI,oBAAqB,QAASC,QAAWL,IACtD5I,EAAOkJ,GAAG,yBAIhB,SAAShI,GACP6B,EAAOlB,sBAAqB,EAE5B,IAAIsH,GAAa/G,EAAEgH,SAASlI,EAAMmI,MAAQ,gBAAkBnI,EAAMmI,KAAKC,MAAM,KAAK,EAE9ElH,GAAEmH,SAAS9B,EAAGa,aAAca,GAC9B1B,EAAGzD,OAAOE,aAAa/D,MAAOe,EAAMsD,UAC7BpC,EAAEmH,SAAS9B,EAAGc,eAAgBY,IACrC1B,EAAGzD,OAAOE,aAAa9D,SAAUc,EAAMsD,UAEzCzB,EAAOyG,aAKb/B,EAAGgC,cAAgB,WACjB3J,EAAKuB,gBAAgBC,GAASP,KAC5B,SAASC,GACPgH,GAAiB,IAEnB,SAAS9G,GACP8G,GAAiB,MAWnB1G,GAAmC,iBAAxBtB,EAAO0J,QAAQ/D,MAC5B8B,EAAGgC,gBAzEP3M,QACGe,OAAO,mBACPiF,WAAW,mBAAoB+E,GAElCA,EAAiB3I,SAAW,SAAU,SAAU,WAAY,YAAa,OAAQ,IAAK,cAAe,mBA4EvG,WACE,YAQA,SAASyK,GAAiB5G,EAAQ/C,EAAQ2B,EAAU5B,EAAUD,EAAMiI,EAAalE,EAAcqC,GAE7F,GAAIuB,GAAK/D,IAET+D,GAAGxJ,QACHwJ,EAAGM,YAAiBA,EACpBN,EAAGzD,OAAiBH,EAAaiB,YACjC2C,EAAGa,cAAkB,iBAAkB,iBACvCb,EAAGc,gBAAkB,iBAAkB,iBAEvCd,EAAGvH,MAAQ,WACT6C,EAAOlB,sBAAqB,GAE5B/B,EAAKI,MAAMuH,EAAGxJ,KAAKkC,MAAOsH,EAAGxJ,KAAKmC,UAAUW,KAC1C,SAASC,GACPyG,EAAGmC,YAAc9J,EAAKY,UAEtBqC,EAAOlB,sBAAqB,GAEvB4F,EAAGmC,YAAY1L,eAKlB6E,EAAO8G,MAAM,mBACb7J,EAAOkJ,GAAG,eALVzB,EAAGzD,OAAOE,aAAa/D,MAAO,gDAC9BsH,EAAGqC,WAAa/J,EAASvB,IAAI,sBAAuB,GAAQ,EAC5DmD,EAAS,WAAa7B,EAAKU,UAAa,OAM5C,SAASU,GACP6B,EAAOlB,sBAAqB,EAE5B,IAAIsH,GAAajI,EAAMmI,KAAKC,MAAM,KAAK,EAEnClH,GAAEmH,SAAS9B,EAAGa,aAAca,GAC9B1B,EAAGzD,OAAOE,aAAa/D,MAAOe,EAAMsD,UAC7BpC,EAAEmH,SAAS9B,EAAGc,eAAgBY,IACrC1B,EAAGzD,OAAOE,aAAa9D,SAAUc,EAAMsD,UAEzCzB,EAAOyG,YAKb/B,EAAGsC,WAAa,WACdjK,EAAKc,sBAAsB6G,EAAGmC,aAAa7I,KACzC,SAASC,GACP,GAAI4H,GAAc,GAAIC,KACtBD,GAAYE,QAAQF,EAAYG,UAAY,GAE5CtB,EAAGqC,YAAa,EAEhB/J,EAASiJ,IAAI,oBAAqB,QAASC,QAAWL,IAEtD1C,EAASzB,KACPyB,EAAS8D,SACNpF,YAAY,yCACZ0B,SAAS,aACTE,UAAU,OAGjB,SAAStF,GACPgF,EAASzB,KACPyB,EAAS8D,SACNpF,YAAY,oCACZ0B,SAAS,aACTE,UAAU,SAvEvB1J,QACGe,OAAO,mBACPiF,WAAW,mBAAoB6G,GAElCA,EAAiBzK,SAAW,SAAU,SAAU,WAAY,WAAY,OAAQ,cAAe,eAAgB,eA6EjH,WACE,YAQA,SAAS+K,GAAyBlH,EAAQ/C,EAAQ8H,EAAW/H,EAAU4B,EAAU7B,EAAMiI,EAAalE,EAAcqC,GAahH,QAAS8B,GAAiBC,GACxBR,EAAGS,cAAgBD,EACnBR,EAAGnD,MAAU2D,EAAS,wBAA0B,8BAChDR,EAAGU,QAAUF,EAAS,wBAA0B,iCAdlD,GACER,GAAK/D,KACL0E,EAAaN,EAAUO,SACvB/G,EAAa8G,EAAW9G,OAE1BmG,GAAGxJ,QACHwJ,EAAGM,YAAiBA,EACpBN,EAAGa,cAAkB,iBAAkB,iBACvCb,EAAGc,gBAAkB,iBAAkB,iBACvCd,EAAGzD,OAAiBH,EAAaiB,YAQ7BxD,GACFxB,EAAKyB,wBAAwBD,GAASP,KACpC,SAASC,GACPgH,GAAiB,IAEnB,SAAS9G,GACP8G,GAAiB,KAKvBP,EAAGgC,cAAgB,WACbhC,EAAGyC,iBAAiBvB,WAExB5F,EAAOlB,sBAAqB,GAE5B/B,EAAK0B,uBAAuBiG,EAAGxJ,KAAKkC,OACjCY,KAAK,SAASC,GACb+B,EAAOlB,sBAAqB,GAC5B9B,EAASiJ,IAAI,qBAAsB,QACnChJ,EAAOkJ,GAAG,0BAEZ,SAAShI,GACP6B,EAAOlB,sBAAqB,EAE5B,IAAIsH,GAAajI,EAAMmI,KAAKC,MAAM,KAAK,EAEnClH,GAAEmH,SAAS9B,EAAGa,aAAca,GAC9B1B,EAAGzD,OAAOE,aAAa/D,MAAOe,EAAMsD,UAEpC0B,EAASzB,KACPyB,EAAS8D,SACNpF,YAAY1D,EAAMsD,SAAW,qBAC7B8B,SAAS,aACTE,UAAU,MAIjBzD,EAAOyG,aAKb/B,EAAG0C,iBAAmB,WACpB1C,EAAG2C,oBAAoBtD,sBAAsBhB,aAAa,wBAAyBhJ,QAAQ4L,OAAOjB,EAAGxJ,KAAKmC,SAAUqH,EAAGxJ,KAAK6I,wBAExHW,EAAG2C,oBAAoBzB,WAE3B5F,EAAOlB,sBAAqB,GAE5B/B,EAAK2B,qBAAqBH,EAASmG,EAAGxJ,KAAKmC,UAAUW,KACnD,SAASC,GACP+B,EAAOlB,sBAAqB,EAE5B,IAAI+G,GAAc,GAAIC,KACtBD,GAAYyB,WAAWzB,EAAY0B,aAAe,GAElDvK,EAASiJ,IAAI,kBAAmB,QAASC,QAAWL,IACpD5I,EAAOkJ,GAAG,4BAEZ,SAAShI,GACP6B,EAAOlB,sBAAqB,EAE5B,IAAIsH,GAAa/G,EAAEgH,SAASlI,EAAMmI,MAAQ,gBAAkBnI,EAAMmI,KAAKC,MAAM,KAAK,EAE9ElH,GAAEmH,SAAS9B,EAAGc,eAAgBY,IAChC1B,EAAGzD,OAAOE,aAAa9D,SAAUc,EAAMsD,UAEzCzB,EAAOyG,aA7Ff1M,QACGe,OAAO,mBACPiF,WAAW,2BAA4BmH,GAE1CA,EAAyB/K,SAAW,SAAU,SAAU,YAAa,WAAY,WAAY,OAAQ,cAAe,eAAgB,eAkGtI,WACE,YAOA,SAASqL,GAAaC,GACpBA,EACGC,MAAM,aACL7I,IAAK,aACLgB,YAAa,wCACbE,WAAY,sBACZD,aAAc,cAEf4H,MAAM,oBACL7I,IAAK,oBACLgB,YAAa,qCACbE,WAAY,mBACZD,aAAc,WAEf4H,MAAM,6BACL7I,IAAK,+BACLgB,YAAa,8CACbE,WAAY,2BACZD,aAAc,oBAEf4H,MAAM,uBACL7I,IAAK,4CACLgB,YAAa,wCACbE,WAAY,sBACZD,aAAc,cA5BpB0H,EAAarL,SAAW,kBADxBpC,QACGe,OAAO,mBACP6M,OAAOH,MAkCZ,WACE,YAQA,SAASI,GAAiB5H,EAAQ/C,EAAQ4K,EAAc9G,EAAW3E,EAAc8G,EAAciB,EAAQ9E,GAErG,GAGEyI,GAFApD,EAAK/D,KACLoH,EAAK5D,GAGPO,GAAGnD,MAAwBsG,EAAavL,SAAW,uBAAyB,iBAC5EoI,EAAGsD,WAAwBH,EAAavL,SAAW,YAAc,UACjEoI,EAAGuD,gBAAwBJ,EAAavL,UAAW,GAAO,EAC1DoI,EAAGwD,OAAwB/D,EAAO+D,SAClCxD,EAAGyD,OAAyB,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAClFzD,EAAG0D,qBAAwBL,EAAEM,QAC7B3D,EAAG4D,cAEET,EAAavL,SAKhBF,EAAaC,UAAUwL,EAAavL,UAAU0B,KAC5C,SAASC,GACPyG,EAAG4D,WAAarK,MAChB6J,EAAgBpD,EAAG4D,WAAWC,OAEhC,SAAStK,GACPiF,EAAaS,WAAW,kCAV5Be,EAAG4D,WAAWD,MAAiB3D,EAAGwD,OAAOxD,EAAG0D,sBAC5C1D,EAAG4D,WAAWE,cAAiBT,EAAEU,cACjC/D,EAAG4D,WAAWI,KAAiBX,EAAEW,QAanChE,EAAGiE,aAAe,WAChBjE,EAAG4D,WAAWC,MAAQ7D,EAAGkE,aAAgBlE,EAAG4D,WAAWC,MAAQ7D,EAAGkE,aAAgBd,GAGpFpD,EAAGmE,YAAc,WAGf,GAFAnE,EAAGoE,WAAWC,iBAEVrE,EAAGoE,WAAWlD,SAAlB,CAEA,GAAImC,GAAI5D,EAAOO,EAAG4D,WAAWI,KAAO,KAAOhE,EAAGwD,OAAOc,QAAQtE,EAAG4D,WAAWD,OAAS,GAAI,UAExF3D,GAAG4D,WAAWE,cAAiBT,EAAEU,cACjC/D,EAAG4D,WAAWW,YAAkBvE,EAAG4D,WAAWC,MAAQ7D,EAAG4D,WAAWE,eAAeU,QAAQ,GAEvFrB,EAAavL,SACfF,EAAaJ,aAAa6L,EAAavL,SAAUoI,EAAG4D,YAAYtK,KAC9D,SAASC,GACP6J,EAAkBpD,EAAG4D,WAAWC,MAChC7D,EAAGkE,aAAe,KAClB1F,EAAaQ,aAAa,mCAE5B,SAASzF,GACPiF,EAAaS,WAAW,kCAI5Be,EAAG4D,WAAWa,WAAapB,EAAEqB,QAAQ,SAASC,cAE9CjN,EAAaG,UAAUmI,EAAG4D,YAAYtK,KACpC,SAASC,GACPyG,EAAG4E,OACHpG,EAAaQ,aAAa,iCAE5B,SAASzF,GACPiF,EAAaS,WAAW,oCAOhCe,EAAG4E,KAAO,WACRrM,EAAOkJ,GAAG,YAAa,MAAOoD,QAAQ,KA/E1CxP,QACGe,OAAO,mBACPiF,WAAW,mBAAoB6H,GAElCA,EAAiBzL,SAAW,SAAU,SAAU,eAAgB,YAAa,eAAgB,eAAgB,SAAU,QAkFzH,WACE,YAQA,SAASqN,GAAyBxJ,EAAQ/C,EAAQ4K,EAAc9G,EAAW3E,EAAc8G,EAAc9H,EAAW+I,EAAQ/E,EAASgF,EAAmB/E,GAEpJ,GACEqF,GAAK/D,IAEP+D,GAAGlJ,QACHkJ,EAAG+E,cACH/E,EAAGgF,YAAe,GAClBhF,EAAGiF,aAAe,KAClBjF,EAAGkF,cACDtF,OAAQ,cAEVI,EAAGmF,UAECjH,KAAM,aACNkH,MAAO,OACPzG,KAAM,SAGNT,KAAM,OACNkH,MAAO,QACPzG,KAAM,WAGNT,KAAM,cACNkH,MAAO,WACPzG,KAAM,WAGNT,KAAM,SACNkH,MAAO,QACPzG,KAAM,UACN0G,MAAM,IAIVrF,EAAGsF,cACDC,WAAY,GACZC,aACA3F,OAAQH,GAGVhI,EAAaC,UAAUwL,EAAavL,UAAU0B,KAC5C,SAASC,GACPyG,EAAGlJ,KAAQ4D,EAAQE,OAAOrB,EAASkM,YACnCzF,EAAGnD,MAAQ,qBAAuBtD,EAASoK,OAE7C,SAASpK,GACPiF,EAAaS,WAAW,iCAI5BvI,EAAUI,OAAOwC,KACf,SAASC,GACPyG,EAAG+E,WAA2BxL,MAC9ByG,EAAGsF,aAAaE,UAAcxF,EAAG+E,YAEnC,WACEvG,EAAaS,WAAW,iCAI5Be,EAAG0F,WAAa,SAASC,GACnB3F,EAAGkF,aAAahH,OAASyH,IAC3B3F,EAAGkF,aAAavG,KAAS,IAE3BqB,EAAGkF,aAAavG,KAAUqB,EAAGkF,aAAavG,KAAiC,QAAzBqB,EAAGkF,aAAavG,KAAiB,OAAQ,GAAM,MACjGqB,EAAGkF,aAAatF,OAAmC,SAAzBI,EAAGkF,aAAavG,KAAkB,IAAMgH,EAAaA,EAC/E3F,EAAGkF,aAAahH,KAAUyH,EAErB3F,EAAGkF,aAAavG,OACnBqB,EAAGkF,aAAatF,OAAS,eAG7BI,EAAG4F,iBAAmB,SAAS3N,EAAamG,GAC1C,GACEyH,GAAUxJ,EAAUwJ,UACfhJ,MAAM,mBACNM,YAAY,gDACZ2I,YAAY1H,GACZhB,GAAG,WACHN,OAAO,MAEdT,GAAUW,KAAK6I,GAASvM,KACtB,WACE5B,EAAaU,gBAAgB+K,EAAavL,SAAUK,GAAaqB,KAC/D,SAASC,GACPyG,EAAGlJ,KAAO6D,EAAEjB,OAAOsG,EAAGlJ,MAAOM,GAAIa,IACjCuG,EAAaQ,aAAa,0BAE5B,SAASzF,GACPiF,EAAaS,WAAW,oCAOlCe,EAAG+F,aAAe,SAASvL,GACzB,MAAO,UAASmF,GACd,IAAKnF,EAAO+K,WAAY,OAAO,CAC/B,IAAiBS,GAAM3C,EAAG4C,EAAtBC,IAqBJ,OAnBAvL,GAAEwL,KAAKxG,EAAM,SAAS1I,EAAO8D,GACf,SAARA,GACFiL,EAAOxL,EAAOgL,UAAUvO,GACpB+O,IACGA,EAAK9H,KAAKkI,cAAc9B,QAAQ9J,EAAO+K,WAAWa,gBACrDF,EAAOzL,KAAKM,IAEC,eAARA,GACTsI,EAAQ5D,EAAOxI,GACfgP,EAAQ5C,EAAEgD,UAAYhD,EAAExD,OAAOrF,EAAOqF,QAAU5I,GAE3CgP,EAAK3B,QAAQ9J,EAAO+K,aACvBW,EAAOzL,KAAKM,KAET9D,EAAM7B,WAAWkP,QAAQ9J,EAAO+K,aACnCW,EAAOzL,KAAKM,KAIXmL,EAAOI,SAIlBtG,EAAG4E,KAAO,WACRrM,EAAOkJ,GAAG,YAAa,MAAOoD,QAAQ,KAGxC7E,EAAGuG,cAAgB,WACjBhO,EAAOkJ,GAAG,uBAAwB7J,SAAUuL,EAAavL,YAG3DoI,EAAGwG,eAAiB,SAASvO,GAC3BM,EAAOkJ,GAAG,uBAAwB7J,SAAUuL,EAAavL,SAAUK,YAAaA,KA7IpF5C,QACGe,OAAO,mBACPiF,WAAW,2BAA4ByJ,GAE1CA,EAAyBrN,SAAW,SAAU,SAAU,eAAgB,YAAa,eAAgB,eAAgB,YAAa,SAAW,UAAW,oBAAqB,QAgJ/K,WACE,YAQA,SAASgP,GAAoBnL,EAAQ/C,EAAQ4K,EAAc9G,EAAW3E,EAAc8G,EAAciB,EAAQ/I,EAAWiE,GAEnH,GACEqF,GAAK/D,IAEP+D,GAAGnD,MAAkBsG,EAAalL,YAAc,sBAAwB,gBACxE+H,EAAGsD,WAAkBH,EAAalL,YAAc,YAAc,UAC9D+H,EAAG0G,aACH1G,EAAG+E,cACH/E,EAAG2G,WAAkB,GACrB3G,EAAG4G,YAAkB,KAErB5G,EAAG4E,KAAO,WACRrM,EAAOkJ,GAAGzB,EAAG2G,WAAY3G,EAAG4G,aAAc/B,QAAQ,KAGpD7E,EAAG6G,mBAAqB,WACtB7G,EAAG0G,UAAUjC,WAAazE,EAAG8G,YAAYnC,eAGtCxB,EAAalL,cAChB+H,EAAG8G,YAAkB,GAAI1F,MACzBpB,EAAG+G,gBAAkBtH,IAASiF,QAAQ,SAASsC,GAC/ChH,EAAGiH,gBAAkBxH,IAASyH,MAAM,SAASF,GAE7ChH,EAAG6G,sBAGLvL,EAAO6C,IAAI,sBAAuB,SAASC,EAAI+I,EAASC,EAAUC,EAAWC,GAC3EtH,EAAG2G,WAAaU,EAAUnJ,MAAQ,YAClC8B,EAAG4G,YAAcQ,EAASxP,UAAYA,SAAUwP,EAASxP,UAAY,OAGnEuL,EAAavL,UAAYuL,EAAalL,aACxCP,EAAaM,aAAamL,EAAavL,SAAUuL,EAAalL,aAAaqB,KACzE,SAASC,GACPyG,EAAG0G,UAAkBnN,MACrByG,EAAG8G,YAAkBrH,EAAOO,EAAG0G,UAAUjC,YAAYuC,GACrDhH,EAAG+G,gBAAkBtH,EAAOO,EAAG0G,UAAUjC,YAAYC,QAAQ,SAASsC,GACtEhH,EAAGiH,gBAAkBxH,EAAOO,EAAG0G,UAAUjC,YAAYyC,MAAM,SAASF,IAEtE,SAASzN,GACPiF,EAAaS,WAAW,iCAK9BvI,EAAUI,OAAOwC,KACf,SAASC,GACPyG,EAAG+E,WAAaxL,OAElB,WACEiF,EAAaS,WAAW,iCAI5Be,EAAGuH,eAAiB,WAClBvH,EAAGwH,cAAcnD,gBAEbrE,EAAGwH,cAActG,WAEjBiC,EAAalL,YACfP,EAAaS,gBAAgBgL,EAAavL,SAAUuL,EAAalL,YAAa+H,EAAG0G,WAAWpN,KAC1F,SAASC,GACPiF,EAAaQ,aAAa,4BAE5B,WACER,EAAaS,WAAW,iCAI5BvH,EAAaQ,gBAAgBiL,EAAavL,SAAUoI,EAAG0G,WAAWpN,KAChE,SAASC,GACPyG,EAAG0G,aACH1G,EAAGwH,cAAcC,eACjBzH,EAAGwH,cAAcE,gBACjBlJ,EAAaQ,aAAa,0BAE5B,WACER,EAAaS,WAAW,mCArFlC5J,QACGe,OAAO,mBACPiF,WAAW,sBAAuBoL,GAErCA,EAAoBhP,SAAW,SAAU,SAAU,eAAgB,YAAa,eAAgB,eAAgB,SAAU,YAAa,QA2FzI,WACE,YAQA,SAASkQ,GAAoBrM,EAAQ/C,EAAQ8D,EAAW3E,EAAc8G,EAAciB,EAAQ/E,EAASC,GAEnG,GACEqF,GAAK/D,IACAwD,IAEPO,GAAGlJ,QACHkJ,EAAG4H,eAAkB,GACrB5H,EAAGgF,YAAkB,GACrBhF,EAAGkF,cACDtF,OAAQ,cAGVI,EAAGmF,UAECjH,KAAM,aACNkH,MAAO,OACPzG,KAAM,OACNkB,OAAQ,cAGR3B,KAAM,QACNkH,MAAO,cACPzG,KAAM,UACN0G,MAAM,IAGNnH,KAAM,cACNkH,MAAO,kBACPzG,KAAM,UACN0G,MAAM,IAGNnH,KAAM,aACNkH,MAAO,eACPzG,KAAM,YAIVjH,EAAaZ,OAAOwC,KAClB,SAASC,GACPyG,EAAGlJ,KAAO4D,EAAQE,OAAOrB,GACzByG,EAAGlJ,KAAO6D,EAAEwL,KAAKnG,EAAGlJ,KAAM,SAAS6I,GACjCA,EAAKkI,YAAc7H,EAAG8H,gBAAgBnI,EAAK8F,eAG/C,SAASlM,GACPiF,EAAaS,WAAW,iCAI5Be,EAAG0F,WAAa,SAASC,GACnB3F,EAAGkF,aAAahH,OAASyH,IAC3B3F,EAAGkF,aAAavG,KAAS,IAE3BqB,EAAGkF,aAAavG,KAAUqB,EAAGkF,aAAavG,KAAiC,QAAzBqB,EAAGkF,aAAavG,KAAiB,OAAQ,GAAM,MACjGqB,EAAGkF,aAAatF,OAAmC,SAAzBI,EAAGkF,aAAavG,KAAkB,IAAMgH,EAAaA,EAC/E3F,EAAGkF,aAAahH,KAAUyH,EAErB3F,EAAGkF,aAAavG,OACnBqB,EAAGkF,aAAatF,OAAS,eAG7BI,EAAG8H,gBAAkB,SAAShR,GAC5B,GAAIiR,GAAOpN,EAAEqN,MAAMlR,EAAM,SACzB,OAAO6D,GAAEsN,OAAOF,EAAM,SAASG,EAAMC,GAAM,MAAOD,GAAOC,GAAQ,IAGnEnI,EAAGoI,WAAa,WACd7P,EAAOkJ,GAAG,qBAGZzB,EAAGqI,YAAc,SAASzQ,GACxBW,EAAOkJ,GAAG,oBAAqB7J,SAAUA,KAG3CoI,EAAGuG,cAAgB,SAAS3O,GAC1BW,EAAOkJ,GAAG,uBAAwB7J,SAAUA,KAG9CoI,EAAGsI,gBAAkB,SAAS1Q,GAC5BW,EAAOkJ,GAAG,6BAA8B7J,SAAUA,KAGpDoI,EAAGuI,aAAe,WAChBlM,EAAUS,UAGZkD,EAAGwI,cAAgB,SAAS5Q,EAAUwG,GACpC,GACEyH,GAAUxJ,EAAUwJ,UACfhJ,MAAM,mBACNM,YAAY,0CACZ2I,YAAY1H,GACZhB,GAAG,WACHN,OAAO,MAEdT,GAAUW,KAAK6I,GAASvM,KACtB,WACE5B,EAAaI,aAAaF,GAAU0B,KAClC,SAASC,GACPyG,EAAGlJ,KAAO6D,EAAEjB,OAAOsG,EAAGlJ,MAAOM,GAAIQ,IACjC4G,EAAaQ,aAAa,iCAE5B,SAASzF,GACPiF,EAAaS,WAAW,oCA/GpC5J,QACGe,OAAO,mBACPiF,WAAW,sBAAuBsM,GAErCA,EAAoBlQ,SAAW,SAAU,SAAU,YAAa,eAAgB,eAAgB,SAAU,UAAW,QAsHvH,WACE,YAOA,SAASqL,GAAaC,GACpBA,EACGC,MAAM,oBACL7I,IAAK,oBACLgB,YAAa,sDACbE,WAAY,4BACZD,aAAc,YATpB0H,EAAarL,SAAW,kBAFxBpC,QACGe,OAAO,mBACP6M,OAAOH,MAeZ,WACE,YAQA,SAAS2F,GAA0BnN,EAAQ/C,EAAS8D,EAAYmC,EAAc9H,GAE5E,GACEsJ,GAAK/D,IAEP+D,GAAG+E,cACH/E,EAAGgG,QAEHtP,EAAUI,OAAOwC,KACf,SAASC,GACPyG,EAAG+E,WAAaxL,OAElB,WACEiF,EAAaS,WAAW,iCAI5Be,EAAG0I,SAAW,WACR1I,EAAG2I,YAAYzH,UAEnBxK,EAAUM,QAAQgJ,EAAGgG,MAAM1M,KACzB,SAASC,GACPyG,EAAG+E,WAAWxL,EAASwB,KAAO1F,QAAQuT,KAAK5I,EAAGgG,MAC9ChG,EAAGgG,QACHhG,EAAG2I,YAAYlB,eACfzH,EAAG2I,YAAYjB,iBAEjB,WACElJ,EAAaS,WAAW,kCAK9Be,EAAG6I,YAAc,SAASzR,EAAI4O,EAAM5H,GAClC,GACEyH,GAAUxJ,EAAUwJ,UACfhJ,MAAM,kBACNM,YAAY,yCAA2C6I,EAAK9H,KAAO,MACnE4H,YAAY1H,GACZhB,GAAG,WACHN,OAAO,MAEdT,GAAUW,KAAK6I,GAASvM,KACtB,WACE5C,EAAUS,WAAWC,GAAIkC,KACvB,SAASC,SACAyG,GAAG+E,WAAW3N,GACrBoH,EAAaQ,aAAa,gCAE5B,SAASzF,GACPiF,EAAaS,WAAW,oCAxDpC5J,QACGe,OAAO,mBACPiF,WAAW,4BAA6BoN,GAE3CA,EAA0BhR,SAAW,SAAU,SAAU,YAAa,eAAgB,gBA+DxF,WACE,YAOA,SAASqL,GAAaC,GACpBA,EACGC,MAAM,WACL7I,IAAK,WACLgB,YAAa,yCACbE,WAAY,mBACZD,aAAc,YAEf4H,MAAM,WACL7I,IAAK,WACLgB,YAAa,yCACbE,WAAY,mBACZD,aAAc,YAEf4H,MAAM,sBACL7I,IAAK,8BACLgB,YAAa,oDACb3B,SACEsP,SAAA,SAAA,WAAA,WAAA,KAAS,SAASvQ,EAAQ2B,EAAU5B,EAAUE,GAC5C,GAAIY,GAAWZ,EAAGa,OAQlB,OANIf,GAASvB,IAAI,qBACfqC,EAASI,WAETJ,EAASM,SACTQ,EAAS,WAAa3B,EAAOkJ,GAAG,SAAW,IAEtCrI,EAASO,aAIrBqJ,MAAM,gBACL7I,IAAK,wBACLgB,YAAa,8CACbE,WAAY,mBACZD,aAAc,UACd5B,SACEuP,aAAA,SAAA,WAAA,WAAA,YAAA,KAAa,SAASxQ,EAAQ2B,EAAU5B,EAAU+H,EAAW7H,GAC3D,GACEY,GAAaZ,EAAGa,QAChBsH,EAAaN,EAAUO,SACvBoI,EAAarI,EAAWqI,IAS1B,OAPIrI,GAAW9G,SAAoB,gBAATmP,GACxB1Q,EAASjB,OAAO,qBAChB+B,EAASI,YAETJ,EAASM,SACTQ,EAAS,WAAa3B,EAAOkJ,GAAG,SAAW,IAEtCrI,EAASO,aAIrBqJ,MAAM,iBACL7I,IAAK,iBACLgB,YAAa,uDACbE,WAAY,2BACZD,aAAc,oBAEf4H,MAAM,oBACL7I,IAAK,mBACLgB,YAAa,0DACbE,WAAY,2BACZD,aAAc,kBACd5B,SACEyP,WAAA,SAAA,WAAA,YAAA,KAAW,SAAS1Q,EAAQ2B,EAAUmG,EAAW7H,GAC/C,GACEY,GAAaZ,EAAGa,QAChBsH,EAAaN,EAAUO,SACvBoI,EAAarI,EAAWqI,IAQ1B,OANIrI,GAAW9G,SAAoB,kBAATmP,EACxB5P,EAASI,WAETJ,EAASM,SACTQ,EAAS,WAAa3B,EAAOkJ,GAAG,SAAW,IAEtCrI,EAASO,aAIrBqJ,MAAM,yBACL7I,IAAK,yBACLgB,YAAa,+DACb3B,SACE0P,iBAAA,SAAA,WAAA,WAAA,KAAiB,SAAS3Q,EAAQ2B,EAAU5B,EAAUE,GACpD,GAAIY,GAAWZ,EAAGa,OAQlB,OANIf,GAASvB,IAAI,sBACfqC,EAASI,WAETJ,EAASM,SACTQ,EAAS,WAAa3B,EAAOkJ,GAAG,SAAW,IAEtCrI,EAASO,aAIrBqJ,MAAM,2BACL7I,IAAK,2BACLgB,YAAa,wDACb3B,SACE0P,iBAAA,SAAA,WAAA,WAAA,KAAiB,SAAS3Q,EAAQ2B,EAAU5B,EAAUE,GACpD,GAAIY,GAAWZ,EAAGa,OASlB,OAPIf,GAASvB,IAAI,oBACfuB,EAASjB,OAAO,sBAChB+B,EAASI,YAETJ,EAASM,SACTQ,EAAS,WAAa3B,EAAOkJ,GAAG,SAAW,IAEtCrI,EAASO,aAnH1BmJ,EAAarL,SAAW,kBAHxBpC,QACGe,OAAO,mBACP6M,OAAOH,MA4HZ,WACE,YAOA,SAASqG,GAASlP,EAAY1B,EAAQF,EAAMxD,GAE1CoF,EAAWmP,gBAAiB,EAE5BnP,EAAWG,qBAAuB,SAASiP,GACzCpP,EAAWmP,eAAiBC,GAG9BpP,EAAWqP,YAAa,EACxBrP,EAAWsP,sBAAwB,OAAQ,UAAW,UAAW,qBAAsB,eAAgB,gBACrE,wBAAyB,mBAAoB,0BAA2B,eAE1GtP,EAAWkE,IAAI,sBAAuB,SAASC,EAAI+I,GACjDlN,EAAWqP,WAAa3O,EAAEmH,SAAS7H,EAAWsP,qBAAsBpC,EAAQjJ,MAExErJ,EAAU2B,KACRyD,EAAWqP,aACblL,EAAGoL,iBACHjR,EAAOkJ,GAAG,cAGPxH,EAAWqP,aACdlL,EAAGoL,iBACHjR,EAAOkJ,GAAG,aAxBlB0H,EAAS1R,SAAW,aAAc,SAAU,OAAQ,aAJpDpC,QACGe,OAAO,mBACPqT,IAAIN,MAmCT,WACE,YAOA,SAASrG,GAAaC,EAAgB2G,GACpC3G,EACGC,MAAM,QACL7I,IAAK,IACLgB,YAAa,uBAEd6H,MAAM,UACL7I,IAAK,UACLX,SACEmQ,YAAA,SAAA,OAAY,SAASpR,EAAQF,GAE3BA,EAAKU,SAASO,KACZ,SAASC,GACPhB,EAAOkJ,GAAG,YAEZ,SAASlI,GACPhB,EAAOkJ,GAAG,kBAMnBuB,MAAM,eACL7I,IAAK,eACLX,SACEoQ,UAAA,SAAA,WAAA,YAAA,WAAA,KAAA,UAAU,SAASrR,EAAQ2B,EAAUmG,EAAW/H,EAAUE,EAAIqR,GAC5D,GACEzQ,GAAgBZ,EAAGa,QACnBsH,EAAgBN,EAAUO,SAC1BkJ,EAAgBzJ,EAAUyJ,SAC1BC,EAAgB1J,EAAU0J,OAC1Bf,EAAgBrI,EAAWqI,KAC3BgB,EAAgB,GAChB7P,EAAgB,EAkBlB,OAhBAD,GAAS,WACH8O,GACW,gBAATA,EACFgB,EAAe,wBACC,kBAAThB,IACPgB,EAAe,oBAEjB7P,EAAM2P,EAAO5O,QAAQ6O,EAAMC,GAE3BH,EAAQI,SAASC,KAAO/P,GAExB5B,EAAOkJ,GAAG,SAEX,GAEHrI,EAASM,SACFN,EAASO,aAKxB+P,EAAmBS,UAAU,SAASC,GACpC,GACE7R,GAAY6R,EAAUrT,IAAI,UAC1BlC,EAAYuV,EAAUrT,IAAI,aAC1B6S,EAAYrR,EAAO0J,QAAQ/D,OAASrJ,EAAU2B,KAAO,YAAc,OAErE+B,GAAOkJ,GAAGmI,KA9Dd9G,EAAarL,SAAW,iBAAkB,sBAL1CpC,QACGe,OAAO,mBACP6M,OAAOH,MAuEZ,WACE,YAQA,SAASuH,GAAgB/O,EAAQpB,EAAUoQ,GAEzC,GAAItK,GAAK/D,IAETX,GAAOC,cAAgB,WACrBD,EAAOiP,OAASlV,QAAQmV,KACxBlP,EAAOmP,OAASpV,QAAQmV,KAExBF,EACGI,KAAK,gBACLpR,KAAK,SAASqR,GACbrP,EAAOmP,OAASpV,QAAQuV,KAAKD,EAASA,EAAQF,QAC9CnP,EAAOiP,OAASlV,QAAQuV,KAAKD,EAASA,EAAQJ,WAIpDjP,EAAO6C,IAAI,kBAAmB,WAC1B6B,EAAG6K,iBAAkB,EACrB3Q,EAAS,WACP8F,EAAG6K,iBAAkB,GACpB,OA1BTxV,QACGe,OAAO,mBACPiF,WAAW,kBAAmBgP,GAEjCA,EAAgB5S,SAAW,SAAU,WAAY,2BA8BnD,WACE,YAEApC,SACGe,OAAO,mBACPV,SAAS,SAAU+J,QACnB/J,SAAS,WAAYX,UACrBW,SAAS,IAAKiF,GACdjF,SAAS,oBAAqB,KAC9BA,SAAS,cAAe,sGAI7B,WACE,YASA,SAASoV,GAAmBC,EAAcC,GAExCD,EAAaE,cAAa,GAE1BD,EAAcE,aAAazQ,KAAK0Q,GAGlC,QAASA,GAAoB3S,EAAIiD,GAC/B,OACE2P,QAAS,SAASnI,GAEhB,MADAxH,GAAUI,gBACHoH,GAEToI,aAAc,SAASpI,GAErB,MADAxH,GAAUM,iBACHvD,EAAGkB,OAAOuJ,IAEnB1J,SAAU,SAAS+R,GAEjB,MADA7P,GAAUM,iBACHuP,GAETC,cAAe,SAASD,GAEtB,MADA7P,GAAUM,iBACHvD,EAAGkB,OAAO4R,KAKvB,QAASE,GAAoBC,GAEzB,GACEC,GAAiBD,EAAmBE,cAAc,QAChDC,IAAO,UACPC,IAAO,YAETC,EAAiBL,EAAmBE,cAAc,eAChDI,KAAQ,UACRC,KAAQ,UACRC,qBAAwB,UAE1BC,EAAaT,EAAmBE,cAAc,OAC5CC,IAAO,UACPC,IAAO,YAETM,EAAYV,EAAmBE,cAAc,QAC3CS,GAAM,WAGVX,GAAmBY,cAAc,cAAeX,GAChDD,EAAmBY,cAAc,cAAeP,GAChDL,EAAmBY,cAAc,UAAWH,GAC5CT,EAAmBY,cAAc,SAAUF,GAE3CV,EACGa,MAAM,WACNC,eAAe,eACfC,cAAc,eACdC,YAAY,WACZC,kBAAkB,UAGvB,QAASC,GAAiBC,EAAuBnN,EAAQC,GACvDD,EAAOoN,OAAO,MACpB3M,QAAQC,IAAIV,EAAOoN,UACbD,EAAsBpJ,OAAkB/D,EAAO+D,SAC/CoJ,EAAsBE,YAAkBrN,EAAOsN,cAC/CH,EAAsBI,KAAkBvN,EAAOwN,WAC/CL,EAAsBM,UAAkBzN,EAAO0N,cAC/CP,EAAsBQ,eAAkB,EAExCR,EAAsBS,WAAa,SAASpH,GAC1C,GAAI5C,GAAI5D,EAAOwG,EACf,OAAO5C,GAAEgD,UAAYhD,EAAExD,OAAOH,GAAqBuG,GAzEzD6E,EAAmBrT,SAAW,eAAgB,iBAC5C+T,EAAoB/T,SAAW,sBAC/BkV,EAAiBlV,SAAW,wBAAyB,SAAU,qBACjE0T,EAAoB1T,SAAW,KAAM,aATrCpC,QACGe,OAAO,mBACP6M,OAAO6H,GACP7H,OAAOuI,GACPvI,OAAO0J,MAmFZtX,QAAQe,OAAO,mBAAmBqT,KAAK,iBAAkB,SAAS6D,GAAiBA,EAAe/L,IAAI,qBAAqB,gaAC3H+L,EAAe/L,IAAI,wCAAwC,q3EAC3D+L,EAAe/L,IAAI,wCAAwC;AAC3D+L,EAAe/L,IAAI,8CAA8C,+0FACjE+L,EAAe/L,IAAI,qCAAqC,giDACxD+L,EAAe/L,IAAI,oCAAoC,qvBACvD+L,EAAe/L,IAAI,4CAA4C,6uCAC/D+L,EAAe/L,IAAI,sCAAsC,qaACzD+L,EAAe/L,IAAI,sDAAsD,u5BACzE+L,EAAe/L,IAAI,wDAAwD,8XAC3E+L,EAAe/L,IAAI,uDAAuD,8/BAC1E+L,EAAe/L,IAAI,+DAA+D,oXAClF+L,EAAe/L,IAAI,0DAA0D,07CAC7E+L,EAAe/L,IAAI,yCAAyC,iyCAC5D+L,EAAe/L,IAAI,oDAAoD,qZACvE+L,EAAe/L,IAAI,yCAAyC,ktDAC5D+L,EAAe/L,IAAI,8CAA8C","file":"scripts/app-dd6ae353e2.js","sourcesContent":["(function() {\r\n  'use strict';\r\n\r\n  // Application config\r\n  var\r\n    FBconfig = {\r\n      apiKey:             \"AIzaSyC-Jr_rmAy_8i0S97WbWlDPwtDQf2UInUM\",\r\n      authDomain:         \"monitoring-37fdd.firebaseapp.com\",\r\n      databaseURL:        \"https://monitoring-37fdd.firebaseio.com\",\r\n      projectId:          \"monitoring-37fdd\",\r\n      storageBucket:      \"monitoring-37fdd.appspot.com\",\r\n      messagingSenderId:  \"375917001440\"\r\n    },\r\n    appConfig = {},\r\n    appStart  = false,\r\n    appModule = angular.module('moneyMonitoring', ['ngAnimate', 'ngCookies', 'ngSanitize', 'ngMessages', 'ngAria', 'ui.router', 'ngMaterial', 'toastr', 'angularUtils.directives.dirPagination']);\r\n\r\n  // Initialize Firebase\r\n  firebase.initializeApp(FBconfig);\r\n\r\n  // User auth state change callback\r\n  firebase.auth().onAuthStateChanged(function(user) {\r\n    appConfig.user = user ? (user.emailVerified ? user : null) : null;\r\n\r\n    if (!appStart) {\r\n      initApp();\r\n      appStart = true;\r\n    }\r\n  });\r\n\r\n  function initApp() {\r\n    appConfig.db       = firebase.database(),\r\n    appConfig.rootRef  = appConfig.db.ref(),\r\n    appConfig.urlBase  = appConfig.rootRef.toString();\r\n\r\n    angular.element(document).ready(function() {\r\n      appModule.constant('appConfig', appConfig);\r\n      angular.bootstrap(document, ['moneyMonitoring']);\r\n    });\r\n  }\r\n\r\n})();\r\n\n(function(){\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    factory('userMarks', userMarks);\r\n\r\n  userMarks.$inject = ['appConfig', 'DB'];\r\n\r\n  function userMarks(appConfig, DB) {\r\n\r\n    var\r\n      userMarks = {},\r\n      userId = appConfig.user.uid;\r\n\r\n    userMarks.list = function() {\r\n      return DB.get('users/' + userId + '/marks');\r\n    }\r\n\r\n    userMarks.addMark = function(value) {\r\n      return DB.add('users/' + userId + '/marks', value);\r\n    }\r\n\r\n    userMarks.removeMark = function(id) {\r\n      return DB.remove('users/' + userId + '/marks/' + id);\r\n    }\r\n\r\n    userMarks.updateRecord = function(value, id) {\r\n      return DB.update('users/' + userId + '/marks/' + id, value);\r\n    }\r\n\r\n\r\n    return userMarks;\r\n  }\r\n\r\n})();\r\n\n(function(){\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    factory('dashboardApi', dashboardApi);\r\n\r\n  dashboardApi.$inject = ['appConfig', 'DB'];\r\n\r\n  function dashboardApi(appConfig, DB) {\r\n\r\n    var\r\n      dashboardApi = {},\r\n      userId = appConfig.user.uid;\r\n\r\n    dashboardApi.list = function() {\r\n      return DB.get('users/' + userId + '/list');\r\n    }\r\n\r\n    dashboardApi.getRecord = function(recordId) {\r\n      return DB.get('users/' + userId + '/list/' + recordId);\r\n    }\r\n\r\n    dashboardApi.addRecord = function(value) {\r\n      return DB.add('users/' + userId + '/list', value);\r\n    }\r\n\r\n    dashboardApi.removeRecord = function(recordId) {\r\n      return DB.remove('users/' + userId + '/list/' + recordId);\r\n    }\r\n\r\n    dashboardApi.updateRecord = function(recordId, value) {\r\n      return DB.update('users/' + userId + '/list/' + recordId, value);\r\n    }\r\n\r\n    dashboardApi.deductionsList = function(recordId) {\r\n      return DB.get('users/' + userId + '/list/' + recordId + '/deductions');\r\n    }\r\n\r\n    dashboardApi.getDeduction = function(recordId, deductionId) {\r\n      return DB.get('users/' + userId + '/list/' + recordId + '/deductions/' + deductionId);\r\n    }\r\n\r\n    dashboardApi.createDeduction = function(recordId, value) {\r\n      return DB.add('users/' + userId + '/list/' + recordId + '/deductions', value);\r\n    }\r\n\r\n    dashboardApi.updateDeduction = function(recordId, deductionId, value) {\r\n      return DB.update('users/' + userId + '/list/' + recordId + '/deductions/' + deductionId, value);\r\n    }\r\n\r\n    dashboardApi.removeDeduction = function(recordId, deductionId) {\r\n      return DB.remove('users/' + userId + '/list/' + recordId + '/deductions/' + deductionId);\r\n    }\r\n\r\n    return dashboardApi;\r\n  }\r\n\r\n})();\r\n\n(function(){\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    factory('Auth', Auth);\r\n\r\n  Auth.$inject = ['$cookies', '$state', 'firebase', '$q'];\r\n\r\n  function Auth($cookies, $state, firebase, $q) {\r\n\r\n    var Auth = {};\r\n\r\n    Auth.login = function(email, password) {\r\n      return firebase.auth().signInWithEmailAndPassword(email, password);\r\n    }\r\n\r\n    Auth.signUp = function(email, password) {\r\n      return firebase.auth().createUserWithEmailAndPassword(email, password);\r\n    }\r\n\r\n    Auth.logout = function() {\r\n      return firebase.auth().signOut();\r\n    }\r\n\r\n    Auth.getUser = function() {\r\n      return firebase.auth().currentUser;\r\n    }\r\n\r\n    Auth.sendEmailVerification = function(user) {\r\n      var\r\n        user     = user || Auth.getUser(),\r\n        deferred = $q.defer();\r\n\r\n      user.sendEmailVerification().then(\r\n        function(response) {\r\n          deferred.resolve(response);\r\n        },\r\n        function(error) {\r\n          deferred.reject(error);\r\n        }\r\n      );\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    Auth.applyActionCode = function(oobCode) {\r\n      var deferred = $q.defer();\r\n\r\n      firebase.auth().applyActionCode(oobCode).then(\r\n        function(response) {\r\n          deferred.resolve(response);\r\n        },\r\n        function(error) {\r\n          deferred.reject(error);\r\n        }\r\n      );\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    Auth.verifyPasswordResetCode = function(oobCode) {\r\n      var deferred = $q.defer();\r\n\r\n      firebase.auth().verifyPasswordResetCode(oobCode).then(\r\n        function(response) {\r\n          deferred.resolve(response);\r\n        },\r\n        function(error) {\r\n          deferred.reject(error);\r\n        }\r\n      );\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    Auth.sendPasswordResetEmail = function(email) {\r\n      var deferred = $q.defer();\r\n\r\n      firebase.auth().sendPasswordResetEmail(email).then(\r\n        function(response) {\r\n          deferred.resolve(response);\r\n        },\r\n        function(error) {\r\n          deferred.reject(error);\r\n        }\r\n      );\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    Auth.confirmPasswordReset = function(oobCode, password) {\r\n      var deferred = $q.defer();\r\n\r\n      firebase.auth().confirmPasswordReset(oobCode, password).then(\r\n        function(response) {\r\n          deferred.resolve(response);\r\n        },\r\n        function(error) {\r\n          deferred.reject(error);\r\n        }\r\n      );\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    return Auth;\r\n  }\r\n\r\n})();\r\n\n(function(){\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    factory('DB', DB);\r\n\r\n  DB.$inject = ['$rootScope', '$timeout', 'appConfig', '$q'];\r\n\r\n  function DB($rootScope, $timeout, appConfig, $q) {\r\n\r\n    var DB = {};\r\n\r\n    DB.get = function(url) {\r\n      $rootScope.preloaderActiveClass(true);\r\n\r\n      var deferred = $q.defer();\r\n\r\n      appConfig.rootRef.child(url).once('value').then(\r\n        function(response) {\r\n          deferred.resolve(response.val());\r\n          $timeout(function() { $rootScope.preloaderActiveClass(false); }, 0);\r\n        },\r\n        function(response) {\r\n          deferred.reject(response);\r\n          $timeout(function() { $rootScope.preloaderActiveClass(false); }, 0);\r\n        }\r\n      );\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    DB.add = function(url, params) {\r\n      $rootScope.preloaderActiveClass(true);\r\n\r\n      var\r\n        deferred = $q.defer(),\r\n        ref      = appConfig.db.ref(url);\r\n\r\n      ref.push(params).then(\r\n        function(response) {\r\n          deferred.resolve(response);\r\n          $timeout(function() { $rootScope.preloaderActiveClass(false); }, 0);\r\n        },\r\n        function(response) {\r\n          deferred.reject(response);\r\n          $timeout(function() { $rootScope.preloaderActiveClass(false); }, 0);\r\n        }\r\n      );\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    DB.remove = function(url) {\r\n      $rootScope.preloaderActiveClass(true);\r\n\r\n      var\r\n        deferred = $q.defer(),\r\n        ref      = appConfig.db.ref(url);\r\n\r\n      ref.remove().then(\r\n        function(response) {\r\n          deferred.resolve(response);\r\n          $timeout(function() { $rootScope.preloaderActiveClass(false); }, 0);\r\n        },\r\n        function(response) {\r\n          deferred.reject(response);\r\n          $timeout(function() { $rootScope.preloaderActiveClass(false); }, 0);\r\n        }\r\n      );\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    DB.update = function(url, params) {\r\n      $rootScope.preloaderActiveClass(true);\r\n\r\n      var\r\n        deferred = $q.defer(),\r\n        ref      = appConfig.db.ref(url);\r\n\r\n      ref.update(params).then(\r\n        function(response) {\r\n          deferred.resolve(response);\r\n          $timeout(function() { $rootScope.preloaderActiveClass(false); }, 0);\r\n        },\r\n        function(response) {\r\n          deferred.reject(response);\r\n          $timeout(function() { $rootScope.preloaderActiveClass(false); }, 0);\r\n        }\r\n      );\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    return DB;\r\n  }\r\n\r\n})();\r\n\n(function(){\r\n\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    factory('toArray', toArray);\r\n\r\n  toArray.$inject = ['_'];\r\n\r\n  function toArray(_) {\r\n\r\n    var\r\n      toArray = {};\r\n\r\n    toArray.create = function(obj) {\r\n      return _.map(obj, function(value, key) {\r\n        value.id = key;\r\n        return value;\r\n      });\r\n    }\r\n\r\n    return toArray;\r\n  }\r\n\r\n\r\n})();\n(function(){\r\n\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    directive('mainSidebar', mainSidebar);\r\n\r\n  mainSidebar.$inject = [];\r\n\r\n  function mainSidebar() {\r\n    return {\r\n      restrict: 'E',\r\n      replace: true,\r\n      templateUrl: 'app/components/sidebar/sidebar.html',\r\n      controllerAs: 'sidebar',\r\n      controller: function($scope) {\r\n        $scope.mdSidenavInit();\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n})();\n(function(){\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    provider('Preloader', Preloader);\r\n\r\n  function Preloader() {\r\n    var\r\n      class_preloader = '.la-anim-10',\r\n      element = angular.element(document.querySelector(class_preloader)),\r\n      activation_class = 'la-animate',\r\n      Preloader = {};\r\n\r\n    Preloader.openPreloader = function(){\r\n      element.addClass(activation_class);\r\n    }\r\n\r\n    Preloader.closePreloader = function(){\r\n      element.removeClass(activation_class);\r\n    }\r\n\r\n    this.$get = function(){\r\n      return Preloader;\r\n    }\r\n  }\r\n\r\n})();\r\n\n(function(){\r\n\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    factory('outputErrors', outputErrors);\r\n\r\n  outputErrors.$inject = ['$rootScope', '$mdDialog', '_'];\r\n\r\n  function outputErrors($rootScope, $mdDialog, _) {\r\n\r\n    var\r\n      outputErrors = {};\r\n\r\n    function Errors() {\r\n      this.errors = {};\r\n    }\r\n\r\n    Errors.prototype.inputErrors = function(errors) {\r\n      this.errors = angular.merge({}, errors);\r\n      $rootScope.$broadcast('$errors', this.errors);\r\n    }\r\n\r\n    Errors.prototype.alertDialog = function(errors) {\r\n      var\r\n        title   = 'Ошибка!',\r\n        cancel  = 'Закрыть',\r\n        message = errors || 'Что-то пошло не так...',\r\n        result  = '';\r\n\r\n      return $mdDialog.show(\r\n        $mdDialog.alert()\r\n          .clickOutsideToClose(true)\r\n          .title(title)\r\n          .textContent(message)\r\n          .ok(cancel)\r\n      );\r\n    }\r\n\r\n    outputErrors.createNew = function() {\r\n      return new Errors();\r\n    }\r\n\r\n    return outputErrors;\r\n  }\r\n\r\n\r\n})();\n(function(){\r\n\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    directive('inputErrors', inputErrors);\r\n\r\n  inputErrors.$inject = [];\r\n\r\n  function inputErrors() {\r\n    return {\r\n      restrict: 'A',\r\n      require: ['?ngModel', '^?form'],\r\n      link: function(scope, element, attrs, ctrls) {\r\n\r\n        var\r\n          form       = ctrls[1],\r\n          input_name = attrs.name,\r\n          ngModel;\r\n\r\n        if (!form) return;\r\n\r\n        ngModel = ctrls[0] || form[input_name];\r\n\r\n        function addModelValidators() {\r\n          if (!ngModel) return;\r\n\r\n          ngModel.$validators[input_name] = function(modelValue, viewValue) {\r\n            return true;\r\n          }\r\n        }\r\n\r\n        addModelValidators();\r\n\r\n        scope.$on('$errors', function(ev, errors) {\r\n          if (!ngModel) return;\r\n\r\n          ngModel.$setValidity(input_name, !_.has(errors, input_name));\r\n          ngModel.$setTouched();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n})();\n(function(){\r\n\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    factory('flashMethods', flashMethods);\r\n\r\n  flashMethods.$inject = ['$rootScope', '$mdToast', '_'];\r\n\r\n  function flashMethods($rootScope, $mdToast, _) {\r\n\r\n    var\r\n      flashMethods = {};\r\n\r\n    flashMethods.createAlert = function(type, message, delay, position) {\r\n      return $mdToast.show({\r\n          template  : '<md-toast class=\"md-toast ' + type +'\"><div class=\"md-toast-content\">' + message + '</div></md-toast>',\r\n          hideDelay : delay || 3000,\r\n          position  : position || 'top right'\r\n        }\r\n      );\r\n    }\r\n\r\n    flashMethods.alertSuccess = function(message, delay, position) {\r\n      return flashMethods.createAlert('success', message, delay, position);\r\n    }\r\n\r\n    flashMethods.alertError = function(message, delay, position) {\r\n      return flashMethods.createAlert('error', message, delay, position);\r\n    }\r\n\r\n    flashMethods.alertInfo = function(message, delay, position) {\r\n      return flashMethods.createAlert('info', message, delay, position);\r\n    }\r\n\r\n    return flashMethods;\r\n  }\r\n\r\n\r\n})();\n(function(){\r\n\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    directive('confirmPassword', confirmPassword);\r\n\r\n  confirmPassword.$inject = [];\r\n\r\n  function confirmPassword() {\r\n    return {\r\n      restrict: 'A',\r\n      require: ['?ngModel', '^?form'],\r\n      scope: {\r\n        regExp: '@'\r\n      },\r\n      link: function(scope, element, attrs, ctrls) {\r\n\r\n        var\r\n          form = ctrls[1],\r\n          ngModel;\r\n\r\n        if (!form) return;\r\n\r\n        ngModel = ctrls[0] || form[attrs.name];\r\n\r\n        if (ngModel) {\r\n          ngModel.$validators.password_confirmation = function(modelValue, viewValue) {\r\n            var\r\n              value    = modelValue || viewValue,\r\n              password = form.password.$modelValue || form.password.$viewValue;\r\n\r\n            return value === password;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n})();\n(function() {\r\n\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .filter('dateFilter', dateFilter);\r\n\r\n  /** @ngInject */\r\n  function dateFilter(moment, defaultDateFormat) {\r\n    return function(item, column) {\r\n      return column && column.type === 'date' ? moment(item).format(column.format || defaultDateFormat) : item;\r\n    }\r\n  }\r\n\r\n})();\r\n\n(function(){\r\n\r\n  'use strict';\r\n\r\n  angular.\r\n    module('moneyMonitoring').\r\n    directive('mainHeader', mainHeader);\r\n\r\n  mainHeader.$inject = ['appConfig'];\r\n\r\n  function mainHeader(appConfig) {\r\n    return {\r\n      restrict: 'E',\r\n      replace: true,\r\n      templateUrl: 'app/components/header/header.html',\r\n      controllerAs: 'header',\r\n      controller: function() {\r\n        var vm = this;\r\n\r\n        vm.user_name = appConfig.user.name;\r\n        console.log(appConfig.user)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n})();\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .controller('SignUpController', SignUpController);\r\n\r\n  SignUpController.$inject = ['$scope', '$state', '$cookies', '$location', 'Auth', '_', 'regExpEmail', 'outputErrors'];\r\n\r\n  function SignUpController($scope, $state, $cookies, $location, Auth, _, regExpEmail, outputErrors) {\r\n\r\n    var\r\n      vm          = this,\r\n      url_params  = $location.search(),\r\n      oobCode     = url_params.oobCode;\r\n\r\n    vm.user           = {};\r\n    vm.regExpEmail    = regExpEmail;\r\n    vm.errors         = outputErrors.createNew();\r\n    vm.email_errors   = ['email-already-in-use', 'user-not-found', 'invalid-email'];\r\n    vm.password_erros = ['wrong-password', 'weak-password'];\r\n\r\n    vm.registration = function() {\r\n      vm.signUpForm.password_confirmation.$setValidity('password_confirmation', angular.equals(vm.user.password, vm.user.password_confirmation));\r\n\r\n      if (vm.signUpForm.$invalid) return;\r\n\r\n      $scope.preloaderActiveClass(true);\r\n\r\n      Auth.signUp(vm.user.email, vm.user.password).then(\r\n        function(response) {\r\n          $scope.preloaderActiveClass(false);\r\n\r\n          Auth.sendEmailVerification().then(\r\n            function() {\r\n              var expire_date = new Date();\r\n              expire_date.setDate(expire_date.getDate() + 1);\r\n\r\n              $cookies.put('confirmation_send', 'true', {'expires': expire_date});\r\n              $state.go('confirmation_email');\r\n            }\r\n          );\r\n        },\r\n        function(error) {\r\n          $scope.preloaderActiveClass(false);\r\n\r\n          var error_type = _.isNumber(error.code) ? 'weak-password' : error.code.split('/')[1];\r\n\r\n          if (_.contains(vm.email_errors, error_type))\r\n            vm.errors.inputErrors({email: error.message});\r\n          else if (_.contains(vm.password_erros, error_type))\r\n            vm.errors.inputErrors({password: error.message});\r\n\r\n          $scope.$apply();\r\n        }\r\n      );\r\n    }\r\n\r\n    vm.confirm_email = function() {\r\n      Auth.applyActionCode(oobCode).then(\r\n        function(response) {\r\n          determine_result(true);\r\n        },\r\n        function(error) {\r\n          determine_result(false);\r\n        }\r\n      );\r\n    }\r\n\r\n    function determine_result(status) {\r\n      vm.verify_status = status;\r\n      vm.title   = status ? 'Регистрация завершена!' : 'Извините, произошла ошибка!';\r\n      vm.content = status ? 'Ваша почта подтверждена. Теперь вы можете войти.' : 'Данная ссылка уже не доступна. Либо вы уже подтвердили вашу почту, либо истек срок действия данной ссылки.';\r\n    }\r\n\r\n    if (oobCode && $state.current.name === 'verify_email') {\r\n      vm.confirm_email();\r\n    }\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .controller('SignInController', SignInController);\r\n\r\n  SignInController.$inject = ['$scope', '$state', '$timeout', '$cookies', 'Auth', 'regExpEmail', 'outputErrors', '$mdToast'];\r\n\r\n  function SignInController($scope, $state, $timeout, $cookies, Auth, regExpEmail, outputErrors, $mdToast) {\r\n\r\n    var vm = this;\r\n\r\n    vm.user           = {};\r\n    vm.regExpEmail    = regExpEmail;\r\n    vm.errors         = outputErrors.createNew();\r\n    vm.email_errors   = ['user-not-found', 'invalid-email'];\r\n    vm.password_erros = ['wrong-password', 'weak-password'];\r\n\r\n    vm.login = function() {\r\n      $scope.preloaderActiveClass(true);\r\n\r\n      Auth.login(vm.user.email, vm.user.password).then(\r\n        function(response) {\r\n          vm.logged_user = Auth.getUser();\r\n\r\n          $scope.preloaderActiveClass(false);\r\n\r\n          if (!vm.logged_user.emailVerified) {\r\n            vm.errors.inputErrors({email: 'Email адрес не подтвержден. Проверте почту.'});\r\n            vm.send_again = $cookies.get('confirmation_send') ? false : true;\r\n            $timeout(function() { Auth.logout(); }, 100);\r\n          } else {\r\n            $scope.$emit('login_animation');\r\n            $state.go('dashboard');\r\n          }\r\n        },\r\n        function(error) {\r\n          $scope.preloaderActiveClass(false);\r\n\r\n          var error_type = error.code.split('/')[1];\r\n\r\n          if (_.contains(vm.email_errors, error_type))\r\n            vm.errors.inputErrors({email: error.message});\r\n          else if (_.contains(vm.password_erros, error_type))\r\n            vm.errors.inputErrors({password: error.message});\r\n\r\n          $scope.$apply();\r\n        }\r\n      );\r\n    }\r\n\r\n    vm.send_email = function() {\r\n      Auth.sendEmailVerification(vm.logged_user).then(\r\n        function(response) {\r\n          var expire_date = new Date();\r\n          expire_date.setDate(expire_date.getDate() + 1);\r\n\r\n          vm.send_again = false;\r\n\r\n          $cookies.put('confirmation_send', 'true', {'expires': expire_date});\r\n\r\n          $mdToast.show(\r\n            $mdToast.simple()\r\n              .textContent('Сообщение отправлено! Проверте почту.')\r\n              .position('top right')\r\n              .hideDelay(5000)\r\n          );\r\n        },\r\n        function(error) {\r\n          $mdToast.show(\r\n            $mdToast.simple()\r\n              .textContent('Ошибка! Сообщение не отправлено.')\r\n              .position('top right')\r\n              .hideDelay(5000)\r\n          );\r\n        }\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .controller('ForgotPasswordController', ForgotPasswordController);\r\n\r\n  ForgotPasswordController.$inject = ['$scope', '$state', '$location', '$cookies', '$timeout', 'Auth', 'regExpEmail', 'outputErrors', '$mdToast'];\r\n\r\n  function ForgotPasswordController($scope, $state, $location, $cookies, $timeout, Auth, regExpEmail, outputErrors, $mdToast) {\r\n\r\n    var\r\n      vm = this,\r\n      url_params = $location.search(),\r\n      oobCode    = url_params.oobCode;\r\n\r\n    vm.user = {};\r\n    vm.regExpEmail    = regExpEmail;\r\n    vm.email_errors   = ['user-not-found', 'invalid-email'];\r\n    vm.password_erros = ['wrong-password', 'weak-password'];\r\n    vm.errors         = outputErrors.createNew();\r\n\r\n    function determine_result(status) {\r\n      vm.verify_status = status;\r\n      vm.title   = status ? 'Восстановление пароля' : 'Извините, произошла ошибка!';\r\n      vm.content = status ? 'Введите новый пароль.' : 'Данная ссылка уже не доступна.';\r\n    }\r\n\r\n    if (oobCode) {\r\n      Auth.verifyPasswordResetCode(oobCode).then(\r\n        function(response) {\r\n          determine_result(true)\r\n        },\r\n        function(error) {\r\n          determine_result(false);\r\n        }\r\n      );\r\n    }\r\n\r\n    vm.confirm_email = function() {\r\n      if (vm.confirmEmailForm.$invalid) return;\r\n\r\n      $scope.preloaderActiveClass(true);\r\n\r\n      Auth.sendPasswordResetEmail(vm.user.email)\r\n        .then(function(response) {\r\n          $scope.preloaderActiveClass(false);\r\n          $cookies.put('email_confirmation', 'true');\r\n          $state.go('confirm_email_success');\r\n        },\r\n        function(error) {\r\n          $scope.preloaderActiveClass(false);\r\n\r\n          var error_type = error.code.split('/')[1];\r\n\r\n          if (_.contains(vm.email_errors, error_type)) {\r\n            vm.errors.inputErrors({email: error.message});\r\n          } else {\r\n            $mdToast.show(\r\n              $mdToast.simple()\r\n                .textContent(error.message || 'Произошла ошибка!')\r\n                .position('top right')\r\n                .hideDelay(10000)\r\n            );\r\n          }\r\n\r\n          $scope.$apply();\r\n        }\r\n      );\r\n    }\r\n\r\n    vm.confirm_password = function() {\r\n      vm.confirmPasswordForm.password_confirmation.$setValidity('password_confirmation', angular.equals(vm.user.password, vm.user.password_confirmation));\r\n\r\n      if (vm.confirmPasswordForm.$invalid) return;\r\n\r\n      $scope.preloaderActiveClass(true);\r\n\r\n      Auth.confirmPasswordReset(oobCode, vm.user.password).then(\r\n        function(response) {\r\n          $scope.preloaderActiveClass(false);\r\n\r\n          var expire_date = new Date();\r\n          expire_date.setMinutes(expire_date.getMinutes() + 2);\r\n\r\n          $cookies.put('change_password', 'true', {'expires': expire_date});\r\n          $state.go('change_password_success');\r\n        },\r\n        function(error) {\r\n          $scope.preloaderActiveClass(false);\r\n\r\n          var error_type = _.isNumber(error.code) ? 'weak-password' : error.code.split('/')[1];\r\n\r\n          if (_.contains(vm.password_erros, error_type))\r\n            vm.errors.inputErrors({password: error.message});\r\n\r\n          $scope.$apply();\r\n        }\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .config(routerConfig);\r\n\r\n  /** @ngInject */\r\n  function routerConfig($stateProvider) {\r\n    $stateProvider\r\n      .state('dashboard', {\r\n        url: '/dashboard',\r\n        templateUrl: 'app/dashboard/partials/dashboard.html',\r\n        controller: 'DashboardController',\r\n        controllerAs: 'dashboard'\r\n      })\r\n      .state('dashboard.record', {\r\n        url: '/record/:recordId',\r\n        templateUrl: 'app/dashboard/partials/record.html',\r\n        controller: 'RecordController',\r\n        controllerAs: 'record'\r\n      })\r\n      .state('dashboard.deductions_list', {\r\n        url: '/record/:recordId/deductions',\r\n        templateUrl: 'app/dashboard/partials/deductions_list.html',\r\n        controller: 'DeductionsListController',\r\n        controllerAs: 'deductions_list'\r\n      })\r\n      .state('dashboard.deduction', {\r\n        url: '/record/:recordId/deductions/:deductionId',\r\n        templateUrl: 'app/dashboard/partials/deduction.html',\r\n        controller: 'DeductionController',\r\n        controllerAs: 'deduction'\r\n      });\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .controller('RecordController', RecordController);\r\n\r\n  RecordController.$inject = ['$scope', '$state', '$stateParams', '$mdDialog', 'dashboardApi', 'flashMethods', 'moment', '_'];\r\n\r\n  function RecordController($scope, $state, $stateParams, $mdDialog, dashboardApi, flashMethods, moment, _) {\r\n\r\n    var\r\n      vm = this,\r\n      m  = moment(),\r\n      defeult_total;\r\n\r\n    vm.title                 = $stateParams.recordId ? 'Редактировать запись' : 'Создать запись';\r\n    vm.submit_btn            = $stateParams.recordId ? 'Сохранить' : 'Создать';\r\n    vm.add_total_input       = $stateParams.recordId ? true : false;\r\n    vm.months                = moment.months();\r\n    vm.years                 = [2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025, 2026];\r\n    vm.current_months_index  = m.month();\r\n    vm.new_record            = {};\r\n\r\n    if (!$stateParams.recordId) {\r\n      vm.new_record.month          = vm.months[vm.current_months_index];\r\n      vm.new_record.days_in_month  = m.daysInMonth();\r\n      vm.new_record.year           = m.year();\r\n    } else {\r\n      dashboardApi.getRecord($stateParams.recordId).then(\r\n        function(response) {\r\n          vm.new_record = response || {};\r\n          defeult_total = vm.new_record.total;\r\n        },\r\n        function(response) {\r\n          flashMethods.alertError('Извините, произошла ошибка!');\r\n        }\r\n      );\r\n    }\r\n\r\n    vm.update_total = function() {\r\n      vm.new_record.total = vm.add_to_total ? (vm.new_record.total + vm.add_to_total) : defeult_total;\r\n    }\r\n\r\n    vm.save_record = function() {\r\n      vm.recordForm.$setSubmitted();\r\n\r\n      if (vm.recordForm.$invalid) return;\r\n\r\n      var m = moment(vm.new_record.year + '-' + (vm.months.indexOf(vm.new_record.month) + 1), 'YYYY-MM');\r\n\r\n      vm.new_record.days_in_month  = m.daysInMonth();\r\n      vm.new_record.sum_in_day     = (vm.new_record.total / vm.new_record.days_in_month).toFixed(2);\r\n\r\n      if ($stateParams.recordId) {\r\n        dashboardApi.updateRecord($stateParams.recordId, vm.new_record).then(\r\n          function(response) {\r\n            defeult_total   = vm.new_record.total;\r\n            vm.add_to_total = null;\r\n            flashMethods.alertSuccess('Запись была успешно обновлена!');\r\n          },\r\n          function(response) {\r\n            flashMethods.alertError('Извините, произошла ошибка!');\r\n          }\r\n        );\r\n      } else {\r\n        vm.new_record.created_at = m.startOf('month').toISOString();\r\n\r\n        dashboardApi.addRecord(vm.new_record).then(\r\n          function(response) {\r\n            vm.back();\r\n            flashMethods.alertSuccess('Запись была успешно создана!');\r\n          },\r\n          function(response) {\r\n            flashMethods.alertError('Извините, произошла ошибка!');\r\n          }\r\n        );\r\n      }\r\n\r\n    }\r\n\r\n    vm.back = function() {\r\n      $state.go('dashboard', null, {reload: true});\r\n    }\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .controller('DeductionsListController', DeductionsListController);\r\n\r\n  DeductionsListController.$inject = ['$scope', '$state', '$stateParams', '$mdDialog', 'dashboardApi', 'flashMethods', 'userMarks', 'moment',  'toArray', 'defaultDateFormat', '_'];\r\n\r\n  function DeductionsListController($scope, $state, $stateParams, $mdDialog, dashboardApi, flashMethods, userMarks, moment, toArray, defaultDateFormat, _) {\r\n\r\n    var\r\n      vm = this;\r\n\r\n    vm.list         = [];\r\n    vm.marks_list   = [];\r\n    vm.search_term  = '';\r\n    vm.current_mark = null;\r\n    vm.current_sort = {\r\n      column: 'created_at'\r\n    };\r\n    vm.columns     = [\r\n      {\r\n        name: 'created_at',\r\n        label: 'Дата',\r\n        type: 'date'\r\n      },\r\n      {\r\n        name: 'mark',\r\n        label: 'Метка',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'description',\r\n        label: 'Описание',\r\n        type: 'string'\r\n      },\r\n      {\r\n        name: 'amount',\r\n        label: 'Сумма',\r\n        type: 'integer',\r\n        sort: true\r\n      }\r\n    ];\r\n\r\n    vm.searchParams = {\r\n      searchTerm: '',\r\n      marksList: {},\r\n      format: defaultDateFormat\r\n    };\r\n\r\n    dashboardApi.getRecord($stateParams.recordId).then(\r\n      function(response) {\r\n        vm.list =  toArray.create(response.deductions);\r\n        vm.title = 'Список вычетов на ' + response.month;\r\n      },\r\n      function(response) {\r\n        flashMethods.alertError('Извините, произошла ошибка!');\r\n      }\r\n    );\r\n\r\n    userMarks.list().then(\r\n      function(response) {\r\n        vm.marks_list               = response || {};\r\n        vm.searchParams.marksList   = vm.marks_list;\r\n      },\r\n      function() {\r\n        flashMethods.alertError('Извините, произошла ошибка!');\r\n      }\r\n    );\r\n\r\n    vm.apply_sort = function(columnName) {\r\n      if (vm.current_sort.name !== columnName)\r\n        vm.current_sort.type   = '';\r\n\r\n      vm.current_sort.type    = vm.current_sort.type ? (vm.current_sort.type === 'asc' ? 'desc': '') : 'asc';\r\n      vm.current_sort.column  = vm.current_sort.type === 'desc' ? '-' + columnName : columnName;\r\n      vm.current_sort.name    = columnName;\r\n\r\n      if (!vm.current_sort.type)\r\n        vm.current_sort.column = 'created_at';\r\n    }\r\n\r\n    vm.remove_deduction = function(deductionId, ev) {\r\n      var\r\n        confirm = $mdDialog.confirm()\r\n            .title('Удаление вычета')\r\n            .textContent('Вы уверены, что хотите удалить данный вычет?')\r\n            .targetEvent(ev)\r\n            .ok('Удалить')\r\n            .cancel('Нет');\r\n\r\n      $mdDialog.show(confirm).then(\r\n        function() {\r\n          dashboardApi.removeDeduction($stateParams.recordId, deductionId).then(\r\n            function(response) {\r\n              vm.list = _.reject(vm.list, {id: deductionId});\r\n              flashMethods.alertSuccess('Вычет успешно удален!');\r\n            },\r\n            function(response) {\r\n              flashMethods.alertError('Извините, произошла ошибка!');\r\n            }\r\n          );\r\n        }\r\n      );\r\n    }\r\n\r\n    vm.searchFilter = function(params) {\r\n      return function(item) {\r\n        if (!params.searchTerm) return true;\r\n        var result = [], mark, m, date;\r\n\r\n        _.each(item, function(value, key) {\r\n          if (key === 'mark') {\r\n            mark = params.marksList[value];\r\n            if (mark) {\r\n              if (~mark.name.toLowerCase().indexOf(params.searchTerm.toLowerCase()))\r\n                result.push(key);\r\n            }\r\n          } else if (key === 'created_at') {\r\n            m     = moment(value),\r\n            date  = m.isValid() ? m.format(params.format) : value;\r\n\r\n            if (~date.indexOf(params.searchTerm))\r\n              result.push(key);\r\n          } else {\r\n            if (~value.toString().indexOf(params.searchTerm))\r\n              result.push(key);\r\n          }\r\n        });\r\n\r\n        return result.length;\r\n      }\r\n    }\r\n\r\n    vm.back = function() {\r\n      $state.go('dashboard', null, {reload: true});\r\n    }\r\n\r\n    vm.add_deduction = function() {\r\n      $state.go('dashboard.deduction', {recordId: $stateParams.recordId});\r\n    }\r\n\r\n    vm.edit_deduction = function(deductionId) {\r\n      $state.go('dashboard.deduction', {recordId: $stateParams.recordId, deductionId: deductionId});\r\n    }\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .controller('DeductionController', DeductionController);\r\n\r\n  DeductionController.$inject = ['$scope', '$state', '$stateParams', '$mdDialog', 'dashboardApi', 'flashMethods', 'moment', 'userMarks', '_'];\r\n\r\n  function DeductionController($scope, $state, $stateParams, $mdDialog, dashboardApi, flashMethods, moment, userMarks, _) {\r\n\r\n    var\r\n      vm = this;\r\n\r\n    vm.title           = $stateParams.deductionId ? 'Редактировать вычет' : 'Создать вычет';\r\n    vm.submit_btn      = $stateParams.deductionId ? 'Сохранить' : 'Создать';\r\n    vm.deduction       = {};\r\n    vm.marks_list      = {};\r\n    vm.from_state      = '';\r\n    vm.from_params     = null;\r\n\r\n    vm.back = function() {\r\n      $state.go(vm.from_state, vm.from_params, {reload: true});\r\n    }\r\n\r\n    vm.set_deduction_date = function() {\r\n      vm.deduction.created_at = vm.picker_date.toISOString();\r\n    }\r\n\r\n    if (!$stateParams.deductionId) {\r\n      vm.picker_date     = new Date();\r\n      vm.picker_min_date = moment().startOf('month')._d;\r\n      vm.picker_max_date = moment().endOf('month')._d;\r\n\r\n      vm.set_deduction_date();\r\n    }\r\n\r\n    $scope.$on('$stateChangeSuccess', function(ev, toState, toParams, fromState, fromParams) {\r\n      vm.from_state = fromState.name || 'dashboard';\r\n      vm.from_params = toParams.recordId ? {recordId: toParams.recordId} : null;\r\n    });\r\n\r\n    if ($stateParams.recordId && $stateParams.deductionId) {\r\n      dashboardApi.getDeduction($stateParams.recordId, $stateParams.deductionId).then(\r\n        function(response) {\r\n          vm.deduction       = response || {};\r\n          vm.picker_date     = moment(vm.deduction.created_at)._d;\r\n          vm.picker_min_date = moment(vm.deduction.created_at).startOf('month')._d;\r\n          vm.picker_max_date = moment(vm.deduction.created_at).endOf('month')._d;\r\n        },\r\n        function(response) {\r\n          flashMethods.alertError('Извините, произошла ошибка!');\r\n        }\r\n      );\r\n    }\r\n\r\n    userMarks.list().then(\r\n      function(response) {\r\n        vm.marks_list = response || {};\r\n      },\r\n      function() {\r\n        flashMethods.alertError('Извините, произошла ошибка!');\r\n      }\r\n    );\r\n\r\n    vm.save_deduction = function() {\r\n      vm.deductionForm.$setSubmitted();\r\n\r\n      if (vm.deductionForm.$invalid) return;\r\n\r\n      if ($stateParams.deductionId) {\r\n        dashboardApi.updateDeduction($stateParams.recordId, $stateParams.deductionId, vm.deduction).then(\r\n          function(response) {\r\n            flashMethods.alertSuccess('Вычет успешно обновлен!');\r\n          },\r\n          function() {\r\n            flashMethods.alertError('Извините, произошла ошибка!');\r\n          }\r\n        );\r\n      } else {\r\n        dashboardApi.createDeduction($stateParams.recordId, vm.deduction).then(\r\n          function(response) {\r\n            vm.deduction = {};\r\n            vm.deductionForm.$setPristine();\r\n            vm.deductionForm.$setUntouched();\r\n            flashMethods.alertSuccess('Вычет успешно создан!');\r\n          },\r\n          function() {\r\n            flashMethods.alertError('Извините, произошла ошибка!');\r\n          }\r\n        );\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .controller('DashboardController', DashboardController);\r\n\r\n  DashboardController.$inject = ['$scope', '$state', '$mdDialog', 'dashboardApi', 'flashMethods', 'moment', 'toArray', '_'];\r\n\r\n  function DashboardController($scope, $state, $mdDialog, dashboardApi, flashMethods, moment, toArray, _) {\r\n\r\n    var\r\n      vm = this,\r\n      m  = moment();\r\n\r\n    vm.list            = [];\r\n    vm.items_per_page  = 12;\r\n    vm.search_term     = '';\r\n    vm.current_sort    = {\r\n      column: 'created_at'\r\n    };\r\n\r\n    vm.columns = [\r\n      {\r\n        name: 'created_at',\r\n        label: 'Дата',\r\n        type: 'date',\r\n        format: 'MMMM YYYY'\r\n      },\r\n      {\r\n        name: 'total',\r\n        label: 'Общая сумма',\r\n        type: 'integer',\r\n        sort: true\r\n      },\r\n      {\r\n        name: 'sum_amounts',\r\n        label: 'Всего потрачено',\r\n        type: 'integer',\r\n        sort: true\r\n      },\r\n      {\r\n        name: 'sum_in_day',\r\n        label: 'Сумма в день',\r\n        type: 'integer'\r\n      }\r\n    ];\r\n\r\n    dashboardApi.list().then(\r\n      function(response) {\r\n        vm.list = toArray.create(response);\r\n        vm.list = _.each(vm.list, function(item) {\r\n          item.sum_amounts = vm.get_sum_amounts(item.deductions);\r\n        });\r\n      },\r\n      function(response) {\r\n        flashMethods.alertError('Извините, произошла ошибка!');\r\n      }\r\n    );\r\n\r\n    vm.apply_sort = function(columnName) {\r\n      if (vm.current_sort.name !== columnName)\r\n        vm.current_sort.type   = '';\r\n\r\n      vm.current_sort.type    = vm.current_sort.type ? (vm.current_sort.type === 'asc' ? 'desc': '') : 'asc';\r\n      vm.current_sort.column  = vm.current_sort.type === 'desc' ? '-' + columnName : columnName;\r\n      vm.current_sort.name    = columnName;\r\n\r\n      if (!vm.current_sort.type)\r\n        vm.current_sort.column = 'created_at';\r\n    }\r\n\r\n    vm.get_sum_amounts = function(list) {\r\n      var keys = _.pluck(list, 'amount');\r\n      return _.reduce(keys, function(memo, num){ return memo + num; }, 0);\r\n    }\r\n\r\n    vm.add_record = function() {\r\n      $state.go('dashboard.record');\r\n    }\r\n\r\n    vm.edit_record = function(recordId) {\r\n      $state.go('dashboard.record', {recordId: recordId});\r\n    }\r\n\r\n    vm.add_deduction = function(recordId) {\r\n      $state.go('dashboard.deduction', {recordId: recordId});\r\n    }\r\n\r\n    vm.deductions_list = function(recordId) {\r\n      $state.go('dashboard.deductions_list', {recordId: recordId});\r\n    }\r\n\r\n    vm.close_dialog = function() {\r\n      $mdDialog.cancel();\r\n    }\r\n\r\n    vm.remove_record = function(recordId, ev) {\r\n      var\r\n        confirm = $mdDialog.confirm()\r\n            .title('Удаление записи')\r\n            .textContent('Вы уверены, что хотите удалить запись?')\r\n            .targetEvent(ev)\r\n            .ok('Удалить')\r\n            .cancel('Нет');\r\n\r\n      $mdDialog.show(confirm).then(\r\n        function() {\r\n          dashboardApi.removeRecord(recordId).then(\r\n            function(response) {\r\n              vm.list = _.reject(vm.list, {id: recordId});\r\n              flashMethods.alertSuccess('Запись была успешно удалена!');\r\n            },\r\n            function(response) {\r\n              flashMethods.alertError('Извините, произошла ошибка!');\r\n            }\r\n          );\r\n        }\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .config(routerConfig);\r\n\r\n  /** @ngInject */\r\n  function routerConfig($stateProvider) {\r\n    $stateProvider\r\n      .state('profile_settings', {\r\n        url: '/profile_settings',\r\n        templateUrl: 'app/profile_settings/partials/profile_settings.html',\r\n        controller: 'ProfileSettingsController',\r\n        controllerAs: 'profile'\r\n      });\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .controller('ProfileSettingsController', ProfileSettingsController);\r\n\r\n  ProfileSettingsController.$inject = ['$scope', '$state', '$mdDialog', 'flashMethods', 'userMarks'];\r\n\r\n  function ProfileSettingsController($scope, $state,  $mdDialog,  flashMethods, userMarks) {\r\n\r\n    var\r\n      vm = this;\r\n\r\n    vm.marks_list = {};\r\n    vm.mark = {};\r\n\r\n    userMarks.list().then(\r\n      function(response) {\r\n        vm.marks_list = response || {};\r\n      },\r\n      function() {\r\n        flashMethods.alertError('Извините, произошла ошибка!');\r\n      }\r\n    );\r\n\r\n    vm.add_mark = function() {\r\n      if (vm.addMarkForm.$invalid) return;\r\n\r\n      userMarks.addMark(vm.mark).then(\r\n        function(response) {\r\n          vm.marks_list[response.key] = angular.copy(vm.mark);\r\n          vm.mark = {};\r\n          vm.addMarkForm.$setPristine();\r\n          vm.addMarkForm.$setUntouched();\r\n        },\r\n        function() {\r\n          flashMethods.alertError('Извините, произошла ошибка!');\r\n        }\r\n      );\r\n    }\r\n\r\n    vm.remove_mark = function(id, mark, ev) {\r\n      var\r\n        confirm = $mdDialog.confirm()\r\n            .title('Удаление метки')\r\n            .textContent('Вы уверены, что хотите удалить метку \"' + mark.name + '\"?')\r\n            .targetEvent(ev)\r\n            .ok('Удалить')\r\n            .cancel('Нет');\r\n\r\n      $mdDialog.show(confirm).then(\r\n        function() {\r\n          userMarks.removeMark(id).then(\r\n            function(response) {\r\n              delete vm.marks_list[id];\r\n              flashMethods.alertSuccess('Метка была успешно удалена!');\r\n            },\r\n            function(response) {\r\n              flashMethods.alertError('Извините, произошла ошибка!');\r\n            }\r\n          );\r\n        }\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .config(routerConfig);\r\n\r\n  /** @ngInject */\r\n  function routerConfig($stateProvider) {\r\n    $stateProvider\r\n      .state('sign_in', {\r\n        url: '/sign_in',\r\n        templateUrl: 'app/auth/sign_in/partials/sign_in.html',\r\n        controller: 'SignInController',\r\n        controllerAs: 'sign_in'\r\n      })\r\n      .state('sign_up', {\r\n        url: '/sign_up',\r\n        templateUrl: 'app/auth/sign_up/partials/sign_up.html',\r\n        controller: 'SignUpController',\r\n        controllerAs: 'sign_up'\r\n      })\r\n      .state('confirmation_email', {\r\n        url: '/sign_up/confirmation_email',\r\n        templateUrl: 'app/auth/sign_up/partials/confirmation_email.html',\r\n        resolve: {\r\n          isEmail: function($state, $timeout, $cookies, $q) {\r\n            var deferred = $q.defer();\r\n\r\n            if ($cookies.get('confirmation_send')) {\r\n              deferred.resolve();\r\n            } else {\r\n              deferred.reject();\r\n              $timeout(function() { $state.go('home') }, 0);\r\n            }\r\n            return deferred.promise;\r\n          }\r\n        }\r\n      })\r\n      .state('verify_email', {\r\n        url: '/sign_up/verify_email',\r\n        templateUrl: 'app/auth/sign_up/partials/verify_email.html',\r\n        controller: 'SignUpController',\r\n        controllerAs: 'sign_up',\r\n        resolve: {\r\n          verifyEmail: function($state, $timeout, $cookies, $location, $q) {\r\n            var\r\n              deferred   = $q.defer(),\r\n              url_params = $location.search(),\r\n              mode       = url_params.mode;\r\n\r\n            if (url_params.oobCode && mode === 'verifyEmail') {\r\n              $cookies.remove('confirmation_send');\r\n              deferred.resolve();\r\n            } else {\r\n              deferred.reject();\r\n              $timeout(function() { $state.go('home') }, 0);\r\n            }\r\n            return deferred.promise;\r\n          }\r\n        }\r\n      })\r\n      .state('confirm_email', {\r\n        url: '/confirm_email',\r\n        templateUrl: 'app/auth/forgot_password/partials/confirm_email.html',\r\n        controller: 'ForgotPasswordController',\r\n        controllerAs: 'forgot_password'\r\n      })\r\n      .state('confirm_password', {\r\n        url: '/change_password',\r\n        templateUrl: 'app/auth/forgot_password/partials/confirm_password.html',\r\n        controller: 'ForgotPasswordController',\r\n        controllerAs: 'forgot_password',\r\n        resolve: {\r\n          checkCode: function($state, $timeout, $location, $q) {\r\n            var\r\n              deferred   = $q.defer(),\r\n              url_params = $location.search(),\r\n              mode       = url_params.mode;\r\n\r\n            if (url_params.oobCode && mode === 'resetPassword') {\r\n              deferred.resolve();\r\n            } else {\r\n              deferred.reject();\r\n              $timeout(function() { $state.go('home') }, 0);\r\n            }\r\n            return deferred.promise;\r\n          }\r\n        }\r\n      })\r\n      .state('confirm_email_success', {\r\n        url: '/confirm_email_success',\r\n        templateUrl: 'app/auth/forgot_password/partials/confirm_email_success.html',\r\n        resolve: {\r\n          checkParamsCode: function($state, $timeout, $cookies, $q) {\r\n            var deferred = $q.defer();\r\n\r\n            if ($cookies.get('email_confirmation')) {\r\n              deferred.resolve();\r\n            } else {\r\n              deferred.reject();\r\n              $timeout(function() { $state.go('home') }, 0);\r\n            }\r\n            return deferred.promise;\r\n          }\r\n        }\r\n      })\r\n      .state('change_password_success', {\r\n        url: '/change_password_success',\r\n        templateUrl: 'app/auth/forgot_password/partials/change_success.html',\r\n        resolve: {\r\n          checkParamsCode: function($state, $timeout, $cookies, $q) {\r\n            var deferred = $q.defer();\r\n\r\n            if ($cookies.get('change_password')) {\r\n              $cookies.remove('email_confirmation');\r\n              deferred.resolve();\r\n            } else {\r\n              deferred.reject();\r\n              $timeout(function() { $state.go('home') }, 0);\r\n            }\r\n            return deferred.promise;\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .run(runBlock);\r\n\r\n  /** @ngInject */\r\n  function runBlock($rootScope, $state, Auth, appConfig) {\r\n\r\n    $rootScope.preloaderClass = false;\r\n\r\n    $rootScope.preloaderActiveClass = function(bool) {\r\n      $rootScope.preloaderClass = bool;\r\n    }\r\n\r\n    $rootScope.headerHide = true;\r\n    $rootScope.states_for_anonymous = ['home', 'sign_in', 'sign_up', 'confirmation_email', 'verify_email', 'confirm_email',\r\n                                      'confirm_email_success', 'confirm_password', 'change_password_success', 'auth_action'];\r\n\r\n    $rootScope.$on('$stateChangeSuccess', function(ev, toState) {\r\n      $rootScope.headerHide = _.contains($rootScope.states_for_anonymous, toState.name);\r\n\r\n      if (appConfig.user) {\r\n        if ($rootScope.headerHide) {\r\n          ev.preventDefault();\r\n          $state.go('dashboard');\r\n        }\r\n      } else {\r\n        if (!$rootScope.headerHide) {\r\n          ev.preventDefault();\r\n          $state.go('logout');\r\n        }\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .config(routerConfig);\r\n\r\n  /** @ngInject */\r\n  function routerConfig($stateProvider, $urlRouterProvider) {\r\n    $stateProvider\r\n      .state('home', {\r\n        url: '/',\r\n        templateUrl: 'app/auth/auth.html'\r\n      })\r\n      .state('logout', {\r\n        url: '/logout',\r\n        resolve: {\r\n          userLogout: function($state, Auth) {\r\n            // Auth.removeToken();\r\n            Auth.logout().then(\r\n              function(response) {\r\n                $state.go('sign_in');\r\n              },\r\n              function(response) {\r\n                $state.go('sign_in');\r\n              }\r\n            )\r\n          }\r\n        }\r\n      })\r\n      .state('auth_action', {\r\n        url: '/auth_action',\r\n        resolve: {\r\n          redirect: function($state, $timeout, $location, $cookies, $q, $window) {\r\n            var\r\n              deferred      = $q.defer(),\r\n              url_params    = $location.search(),\r\n              absUrl        = $location.absUrl(),\r\n              path          = $location.path(),\r\n              mode          = url_params.mode,\r\n              redirect_url  = '',\r\n              url           = '';\r\n\r\n            $timeout(function() {\r\n              if (mode) {\r\n                if (mode === 'verifyEmail')\r\n                  redirect_url = '/sign_up/verify_email';\r\n                else if (mode === 'resetPassword')\r\n                  redirect_url = '/change_password';\r\n\r\n                url = absUrl.replace(path, redirect_url);\r\n\r\n                $window.location.href = url;\r\n              } else {\r\n                $state.go('home');\r\n              }\r\n            }, 0);\r\n\r\n            deferred.reject();\r\n            return deferred.promise;\r\n          }\r\n        }\r\n      });\r\n\r\n    $urlRouterProvider.otherwise(function($ingector) {\r\n      var\r\n        $state    = $ingector.get('$state'),\r\n        appConfig = $ingector.get('appConfig'),\r\n        redirect  = $state.current.name || (appConfig.user ? 'dashboard' : 'home');\r\n\r\n      $state.go(redirect);\r\n    });\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .controller('IndexController', IndexController);\r\n\r\n  IndexController.$inject = ['$scope', '$timeout', '$mdComponentRegistry'];\r\n\r\n  function IndexController($scope, $timeout, $mdComponentRegistry) {\r\n\r\n    var vm = this;\r\n\r\n    $scope.mdSidenavInit = function() {\r\n      $scope.toggle = angular.noop;\r\n      $scope.isOpen = angular.noop;\r\n\r\n      $mdComponentRegistry\r\n        .when('sidebar-left')\r\n        .then(function(sideNav){\r\n          $scope.isOpen = angular.bind(sideNav, sideNav.isOpen );\r\n          $scope.toggle = angular.bind(sideNav, sideNav.toggle );\r\n        });\r\n    }\r\n\r\n    $scope.$on('login_animation', function() {\r\n        vm.login_animation = true;\r\n        $timeout(function() {\r\n          vm.login_animation = false;\r\n        }, 2000);\r\n    });\r\n\r\n  }\r\n\r\n})();\r\n\n/* global malarkey:false, moment:false */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .constant('moment', moment)\r\n    .constant('firebase', firebase)\r\n    .constant('_', _)\r\n    .constant('defaultDateFormat', 'L')\r\n    .constant('regExpEmail', '^([0-9a-zA-Z]([-_\\\\.]*[0-9a-zA-Z]+)*)@([0-9a-zA-Z]([-_\\\\.]*[0-9a-zA-Z]+)*)[\\\\.]([a-zA-Z]{2,9})$');\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('moneyMonitoring')\r\n    .config(httpProviderConfig)\r\n    .config(materialThemeConfig)\r\n    .config(datepickerConfig);\r\n\r\n  /** @ngInject */\r\n  function httpProviderConfig($logProvider, $httpProvider) {\r\n    // Enable log\r\n    $logProvider.debugEnabled(true);\r\n\r\n    $httpProvider.interceptors.push(beautifyInterceptor);\r\n  }\r\n\r\n  function beautifyInterceptor($q, Preloader) {\r\n    return {\r\n      request: function(config) {\r\n        Preloader.openPreloader();\r\n        return config;\r\n      },\r\n      requestError: function(config) {\r\n        Preloader.closePreloader();\r\n        return $q.reject(config);\r\n      },\r\n      response: function(res) {\r\n        Preloader.closePreloader();\r\n        return res;\r\n      },\r\n      responseError: function(res) {\r\n        Preloader.closePreloader();\r\n        return $q.reject(res);\r\n      }\r\n    }\r\n  }\r\n\r\n  function materialThemeConfig($mdThemingProvider){\r\n\r\n      var\r\n        primaryBlueMap = $mdThemingProvider.extendPalette('blue', {\r\n          '500': '#1088DE', // Default\r\n          '600': '#1669b1'  // Hover\r\n        }),\r\n        accentGreenMap = $mdThemingProvider.extendPalette('light-green', {\r\n          'A200': '#ABD036', // Default\r\n          'A700': '#94b725', // Hover\r\n          'contrastDefaultColor': 'light'\r\n        }),\r\n        warnRedMap = $mdThemingProvider.extendPalette('red', {\r\n          '500': '#D94740', // Defalt\r\n          '600': '#b32926'  // Hover\r\n        }),\r\n        bgGreyMap = $mdThemingProvider.extendPalette('grey', {\r\n          '50': '#f2f2f2' // Default background\r\n        });\r\n\r\n      $mdThemingProvider.definePalette('primaryBlue', primaryBlueMap);\r\n      $mdThemingProvider.definePalette('accentGreen', accentGreenMap);\r\n      $mdThemingProvider.definePalette('warnRed', warnRedMap);\r\n      $mdThemingProvider.definePalette('bgGrey', bgGreyMap);\r\n      \r\n      $mdThemingProvider\r\n        .theme('default')\r\n        .primaryPalette('primaryBlue')\r\n        .accentPalette('accentGreen')\r\n        .warnPalette('warnRed')\r\n        .backgroundPalette('bgGrey');\r\n    }\r\n\r\n    function datepickerConfig($mdDateLocaleProvider, moment, defaultDateFormat) {\r\n      moment.locale('ru');\r\nconsole.log(moment.locale());\r\n      $mdDateLocaleProvider.months          = moment.months();\r\n      $mdDateLocaleProvider.shortMonths     = moment.monthsShort();\r\n      $mdDateLocaleProvider.days            = moment.weekdays();\r\n      $mdDateLocaleProvider.shortDays       = moment.weekdaysMin();\r\n      $mdDateLocaleProvider.firstDayOfWeek  = 1;\r\n\r\n      $mdDateLocaleProvider.formatDate = function(date) {\r\n        var m = moment(date);\r\n        return m.isValid() ? m.format(defaultDateFormat) : date;\r\n      };\r\n    }\r\n\r\n\r\n\r\n})();\r\n\nangular.module(\"moneyMonitoring\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/auth/auth.html\",\"<div flex layout=column layout-align=\\\"center center\\\" class=auth-wrap><div class=logo><a ui-sref=home>Money Monitoring</a></div><h2 class=md-display-1>Добро пожаловать</h2><div class=\\\"welcome md-subhead\\\">Войдите или зарегистрируйтесь.</div><div class=button-wrap><md-button ui-sref=sign_in class=\\\"md-primary md-raised\\\">Вход</md-button><md-button ui-sref=sign_up class=md-raised>Регистрация</md-button></div></div>\");\n$templateCache.put(\"app/dashboard/partials/dashboard.html\",\"<div class=view-content><ui-view><md-card class=md-whiteframe-2dp><md-card-header layout=row layout-align=\\\"space-between center\\\"><div class=md-headline>Главная</div><div class=search-block><md-input-container md-no-float class=\\\"md-icon-left md-block\\\"><md-icon><i class=\\\"fa fa-search\\\"></i></md-icon><input type=text placeholder=Поиск ng-model=dashboard.search_term></md-input-container></div></md-card-header><md-card-content class=no-padding><div class=table-wrap><div class=main-table><div class=table-head><div class=table-row><div ng-repeat=\\\"column in dashboard.columns\\\" data-type={{column.type}} class=table-cell><span ng-bind=column.label></span><span ng-if=column.sort class=sort_btn ng-click=dashboard.apply_sort(column.name) ng-class=\\\"{\\'asc\\': dashboard.current_sort.type === \\'asc\\' &amp;&amp; dashboard.current_sort.name === column.name, \\'desc\\': dashboard.current_sort.type === \\'desc\\' &amp;&amp; dashboard.current_sort.name === column.name}\\\"><i class=\\\"fa fa-sort-asc\\\"></i><i class=\\\"fa fa-sort-desc\\\"></i></span></div><div class=table-cell></div></div></div><div class=table-body><div dir-paginate=\\\"(key, value) in dashboard.list | orderBy: dashboard.current_sort.column | filter: dashboard.search_term | itemsPerPage: dashboard.items_per_page\\\" class=table-row><div ng-repeat=\\\"column in dashboard.columns\\\" data-type={{column.type}} class=table-cell><span ng-bind=\\\"value[column.name] | dateFilter: column\\\"></span></div><div class=\\\"table-cell action-block\\\"><md-button class=md-icon-button ng-click=dashboard.edit_record(value.id) aria-label=\\\"edit record\\\"><i class=\\\"fa fa-edit\\\"></i></md-button><md-button class=md-icon-button ng-click=dashboard.deductions_list(value.id) aria-label=\\\"deductions list\\\"><i class=\\\"fa fa-eye\\\"></i></md-button><md-button class=md-icon-button ng-click=dashboard.add_deduction(value.id) aria-label=\\\"add deduction\\\"><i class=\\\"fa fa-usd\\\"></i></md-button><md-button class=md-icon-button ng-click=\\\"dashboard.remove_record(value.id, $event)\\\" aria-label=remove><i class=\\\"fa fa-trash-o\\\"></i></md-button></div></div></div></div></div></md-card-content><md-card-footer><div layout=row layout-align=\\\"space-between center\\\" class=footer-wrap><md-button class=\\\"md-raised md-primary\\\" ng-click=dashboard.add_record()>Добавить месяц</md-button><dir-pagination-controls template-url=app/components/pagination/pagination.html></dir-pagination-controls></div></md-card-footer></md-card></ui-view></div>\");\n$templateCache.put(\"app/dashboard/partials/deduction.html\",\"<md-card class=md-whiteframe-2dp><md-card-header><div ng-bind=deduction.title class=md-headline></div></md-card-header><md-card-content><div class=max-width><form name=deduction.deductionForm ng-submit=deduction.save_deduction() class=last-item-no-margin><md-input-container class=md-block><label>Сумма вычета</label><input required name=amount min=0 type=number ng-model=deduction.deduction.amount><div ng-messages=deduction.deductionForm.amount.$error><div ng-message=required>Поле нужно заполнить</div><div ng-message=min>Не может быть отрицательным</div></div></md-input-container><md-input-container class=md-block><label>Метка</label><md-select ng-model=deduction.deduction.mark><md-option ng-value=key ng-repeat=\\\"(key, mark) in deduction.marks_list\\\"><span ng-bind=mark.name></span></md-option></md-select><span class=errors-reserve></span></md-input-container><md-input-container class=md-block><label>Описание</label><textarea ng-model=deduction.deduction.description></textarea></md-input-container><div class=datepicker-input-container><md-datepicker md-open-on-focus class=hide-icon ng-model=deduction.picker_date md-min-date=deduction.picker_min_date md-max-date=deduction.picker_max_date md-placeholder=\\\"Выбрать дату\\\" ng-change=deduction.set_deduction_date()></md-datepicker></div><div class=button-holder><md-button type=submit class=\\\"md-raised md-primary\\\" aria-label=\\\"save deduction\\\"><span ng-bind=deduction.submit_btn></span></md-button><md-button class=md-raised ng-click=deduction.back() aria-label=back>Назад</md-button></div></form></div></md-card-content><md-card-footer></md-card-footer></md-card>\");\n$templateCache.put(\"app/dashboard/partials/deductions_list.html\",\"<md-card class=md-whiteframe-2dp><md-card-header layout=row layout-align=\\\"space-between center\\\"><div flex=50 ng-bind=deductions_list.title class=md-headline></div><div flex=50 layout=row layout-align=\\\"space-between center\\\" class=\\\"search-block filter-marks\\\"><md-input-container md-no-float flex=60 class=\\\"md-icon-left md-block\\\"><md-icon><i class=\\\"fa fa-search\\\"></i></md-icon><input type=text placeholder=Поиск ng-model=deductions_list.searchParams.searchTerm></md-input-container><div flex=35 class=filter-content><md-input-container md-no-float class=md-block><md-select ng-model=deductions_list.search_term placeholder=\\\"Фильтр по меткам\\\"><md-option ng-value=key ng-repeat=\\\"(key, mark) in deductions_list.marks_list\\\"><span ng-bind=mark.name></span></md-option></md-select><span class=errors-reserve></span></md-input-container></div></div></md-card-header><md-card-content class=no-padding><div class=table-wrap><div class=main-table><div class=table-head><div class=table-row><div ng-repeat=\\\"column in deductions_list.columns\\\" data-type={{column.type}} class=table-cell><span ng-bind=column.label></span><span ng-if=column.sort class=sort_btn ng-click=deductions_list.apply_sort(column.name) ng-class=\\\"{\\'asc\\': deductions_list.current_sort.type === \\'asc\\' &amp;&amp; deductions_list.current_sort.name === column.name, \\'desc\\': deductions_list.current_sort.type === \\'desc\\' &amp;&amp; deductions_list.current_sort.name === column.name}\\\"><i class=\\\"fa fa-sort-asc\\\"></i><i class=\\\"fa fa-sort-desc\\\"></i></span></div><div class=table-cell></div></div></div><div class=table-body><div ng-repeat=\\\"(key, value) in deductions_list.list | orderBy: deductions_list.current_sort.column | filter: deductions_list.searchFilter(deductions_list.searchParams)\\\" class=table-row><div ng-repeat=\\\"column in deductions_list.columns\\\" data-type={{column.type}} class=table-cell><span ng-bind=\\\"(column.name === \\'mark\\' ? (deductions_list.marks_list[value[column.name]].name) : value[column.name]) | dateFilter: column\\\"></span></div><div class=\\\"table-cell action-block\\\"><md-button class=md-icon-button ng-click=deductions_list.edit_deduction(value.id) aria-label=\\\"edit deduction\\\"><i class=\\\"fa fa-pencil-square-o\\\"></i></md-button><md-button class=md-icon-button ng-click=\\\"deductions_list.remove_deduction(value.id, $event)\\\" aria-label=\\\"remove deduction\\\"><i class=\\\"fa fa-trash-o\\\"></i></md-button></div></div></div></div></div></md-card-content><md-card-footer><div layout=row layout-align=\\\"space-between center\\\" class=footer-wrap><div class=button-holder><md-button class=\\\"md-raised md-primary\\\" ng-click=deductions_list.add_deduction() aria-label=back>Добавить вычет</md-button><md-button class=md-raised ng-click=deductions_list.back() aria-label=back>Назад</md-button></div><dir-pagination-controls template-url=app/components/pagination/pagination.html></dir-pagination-controls></div></md-card-footer></md-card>\");\n$templateCache.put(\"app/dashboard/partials/record.html\",\"<md-card class=md-whiteframe-2dp><md-card-header><div ng-bind=record.title class=md-headline></div></md-card-header><md-card-content><div class=max-width><form name=record.recordForm class=last-item-no-margin><md-input-container class=md-block><label>Введите сумму</label><input required name=total type=number ng-model=record.new_record.total ng-disabled=record.add_to_total><div ng-messages=record.recordForm.total.$error><div ng-message=required>Поле нужно заполнить</div></div></md-input-container><md-input-container class=md-block ng-if=record.add_total_input><label>Или введите значение, на которое нужно увеличить</label><input type=number ng-model=record.add_to_total ng-change=record.update_total()></md-input-container><md-input-container class=md-block><label>Месяц</label><md-select ng-model=record.new_record.month><md-option ng-value=month ng-repeat=\\\"month in record.months\\\"><span ng-bind=month></span></md-option></md-select><span class=errors-reserve></span></md-input-container><md-input-container class=md-block><label>Год</label><md-select ng-model=record.new_record.year><md-option ng-value=year ng-repeat=\\\"year in record.years\\\"><span ng-bind=year></span></md-option></md-select><span class=errors-reserve></span></md-input-container></form></div></md-card-content><md-card-footer><md-button class=\\\"md-raised md-primary\\\" ng-click=record.save_record($event) aria-label=\\\"save record\\\"><span ng-bind=record.submit_btn></span></md-button><md-button class=md-raised ng-click=record.back() aria-label=back>Назад</md-button></md-card-footer></md-card>\");\n$templateCache.put(\"app/components/header/header.html\",\"<md-toolbar class=main-header><div class=md-toolbar-tools><div flex class=left-side><md-button class=\\\"md-icon-button btn-sandwich\\\" aria-label=menu ng-click=toggle() ng-class=\\\"{\\'sidebar-open\\': isOpen()}\\\"><span class=top-part></span><span class=middle-part></span><span class=bottom-part></span></md-button></div><div flex class=\\\"senter-side align-center\\\"><div class=\\\"logo small\\\"><a ui-sref=home>Money Monitoring</a></div></div><div flex class=right-side><div ng-bind=header.user_name class=user-name></div><md-button class=md-icon-button aria-label=settings ui-sref=profile_settings><i class=\\\"fa fa-cog\\\"></i></md-button><md-button class=md-icon-button aria-label=logout ui-sref=logout><i class=\\\"fa fa-sign-out\\\"></i></md-button></div></div></md-toolbar>\");\n$templateCache.put(\"app/components/pagination/pagination.html\",\"<div ng-if=\\\"1 &lt; pages.length || !autoHide\\\" class=pagination><span ng-bind=\\\"range.lower + \\'-\\' + range.upper + \\' из \\' + range.total\\\"></span><md-button ng-if=boundaryLinks class=md-icon-button aria-label=first ng-click=setCurrent(1) ng-disabled=\\\"pagination.current == 1\\\"><i class=\\\"fa fa-chevron-left\\\"></i></md-button><md-button ng-if=directionLinks class=md-icon-button aria-label=first ng-click=\\\"setCurrent(pagination.current - 1)\\\" ng-disabled=\\\"pagination.current == 1\\\"><i class=\\\"fa fa-chevron-left\\\"></i></md-button><md-button ng-if=false ng-repeat=\\\"pageNumber in pages track by tracker(pageNumber, $index)\\\" class=md-icon-button aria-label=first ng-click=\\\"setCurrent(pagination.current - 1)\\\" ng-class=\\\"{ active : pagination.current == pageNumber}\\\" ng-disabled=\\\"pageNumber == \\'...\\'\\\"><span ng-bind=pageNumber></span></md-button><md-button ng-if=directionLinks class=md-icon-button aria-label=last ng-click=\\\"setCurrent(pagination.current + 1)\\\" ng-disabled=\\\"pagination.current == pagination.last\\\"><i class=\\\"fa fa-chevron-right\\\"></i></md-button><md-button ng-if=boundaryLinks class=md-icon-button aria-label=last ng-click=setCurrent(pagination.last) ng-disabled=\\\"pagination.current == pagination.last\\\"><i class=\\\"fa fa-chevron-right\\\"></i></md-button></div>\");\n$templateCache.put(\"app/components/sidebar/sidebar.html\",\"<md-sidenav md-disable-backdrop class=md-sidenav-left md-component-id=sidebar-left md-whiteframe=4><md-toolbar class=md-theme-indigo><h1 class=md-toolbar-tools>Disabled Backdrop</h1><md-content><p>This sidenav is not showing any backdrop, where users can click on it, to close the sidenav.</p><md-button ng-click=index.toggleLeft() class=md-accent>Close this Sidenav</md-button></md-content></md-toolbar></md-sidenav>\");\n$templateCache.put(\"app/profile_settings/partials/profile_settings.html\",\"<div class=view-content><md-card class=md-whiteframe-2dp><md-card-header><div class=md-headline>Настройки профиля</div></md-card-header><md-card-content><div class=md-title>Метки</div><div class=max-width><p>Список меток</p><div class=marks-list><div ng-repeat=\\\"(key, value) in profile.marks_list\\\" class=mark><span ng-bind=value.name></span><md-button class=md-icon-button ng-click=\\\"profile.remove_mark(key, value, $event)\\\" aria-label=remove><i class=\\\"fa fa-times\\\"></i></md-button></div></div><form name=profile.addMarkForm class=last-item-no-margin ng-submit=profile.add_mark()><md-input-container class=md-block><label>Название метки</label><input required type=text ng-model=profile.mark.name></md-input-container><div class=button-holder><md-button class=\\\"md-raised md-primary\\\" type=submit aria-label=add>Добавить</md-button></div></form></div></md-card-content><md-card-footer></md-card-footer></md-card></div>\");\n$templateCache.put(\"app/auth/forgot_password/partials/change_success.html\",\"<div flex layout=column layout-align=\\\"center center\\\" class=auth-wrap><div class=logo><a ui-sref=home>Money Monitoring</a></div><div class=done><div class=md-headline>Пароль успешно изменен!</div><div class=md-subhead>Теперь вы можете войти под новым паролем.</div><div class=button-wrap><md-button ui-sref=sign_in class=\\\"md-primary md-raised\\\">Войти</md-button></div></div></div>\");\n$templateCache.put(\"app/auth/forgot_password/partials/confirm_email.html\",\"<div flex layout=column layout-align=\\\"center center\\\" class=auth-wrap><div class=logo><a ui-sref=home>Money Monitoring</a></div><h2 class=md-display-1>Восстановление пароля</h2><div class=\\\"md-subhead align-center max-width\\\">Введите ваш email адрес. Вам будет отправлено письмо с дальнейшими инструкциями.</div><div class=form-wrap><form name=forgot_password.confirmEmailForm ng-submit=forgot_password.confirm_email()><md-input-container class=md-block><label>Email</label><input required input-errors pattern={{forgot_password.regExpEmail}} type=email name=email ng-model=forgot_password.user.email autofocus><div ng-messages=forgot_password.confirmEmailForm.email.$error><div ng-message=pattern>Не корректный email адрес.</div><div ng-message=email><span ng-bind=forgot_password.errors.errors.email></span></div></div></md-input-container><div class=button-wrap><md-button ui-sref=home class=md-raised>Назад</md-button><md-button type=submit class=\\\"md-primary md-raised\\\">Продолжить</md-button></div></form></div></div>\");\n$templateCache.put(\"app/auth/forgot_password/partials/confirm_email_success.html\",\"<div flex layout=column layout-align=\\\"center center\\\" class=auth-wrap><div class=logo><a ui-sref=home>Money Monitoring</a></div><div class=done><div class=md-headline>Восстановление пароля</div><div class=md-subhead>Для изменения пароля вам было выслано письмо на почту с дальнейшими инструкциями. Обратите внимание, что письма иногда попадают в спам.</div></div></div>\");\n$templateCache.put(\"app/auth/forgot_password/partials/confirm_password.html\",\"<div flex layout=column layout-align=\\\"center center\\\" class=auth-wrap><div class=logo><a ui-sref=home>Money Monitoring</a></div><h2 class=md-display-1 ng-bind=forgot_password.title>Восстановление пароля</h2><div ng-bind=forgot_password.content class=\\\"md-subhead align-center\\\">Введите новый пароль.</div><div ng-if=forgot_password.verify_status class=form-wrap><form name=forgot_password.confirmPasswordForm ng-submit=forgot_password.confirm_password()><md-input-container class=md-block><label>Пароль</label><input required input-errors type=password name=password minlength=6 ng-model=forgot_password.user.password autofocus><div ng-messages=forgot_password.confirmPasswordForm.password.$error><div ng-message=minlength>Пароль не может быть меньше 6 символов!</div><div ng-message=password><span ng-bind=forgot_password.errors.errors.password></span></div></div></md-input-container><md-input-container class=md-block><label>Повторите пароль</label><input required confirm-password type=password name=password_confirmation ng-model=forgot_password.user.password_confirmation autocomplete=new-password><div ng-messages=forgot_password.confirmPasswordForm.password_confirmation.$error><div ng-message=password_confirmation>Должно соответствовать паролю.</div></div></md-input-container><div class=button-wrap><md-button ui-sref=home class=md-raised>Назад</md-button><md-button type=submit class=\\\"md-primary md-raised\\\">Сохранить</md-button></div></form></div></div>\");\n$templateCache.put(\"app/auth/sign_in/partials/sign_in.html\",\"<div flex layout=column layout-align=\\\"center center\\\" class=auth-wrap><div class=logo><a ui-sref=home>Money Monitoring</a></div><h2 class=md-display-1>Вход</h2><div class=form-wrap><form name=sign_in.signInForm ng-submit=sign_in.login()><md-input-container class=md-block><label>Email</label><input required input-errors pattern={{sign_in.regExpEmail}} type=email name=email ng-model=sign_in.user.email autofocus><div ng-messages=sign_in.signInForm.email.$error><div ng-message=pattern>Не корректный email адрес.</div><div ng-message=email><span ng-bind=sign_in.errors.errors.email></span><a class=send-email-btn ng-click=sign_in.send_email() ng-if=sign_in.send_again>Отправить еще раз</a></div></div></md-input-container><md-input-container class=\\\"md-block mb-0\\\"><label>Пароль</label><input required input-errors type=password name=password ng-model=sign_in.user.password><div ng-messages=sign_in.signInForm.password.$error><div ng-message=password><span ng-bind=sign_in.errors.errors.password></span></div></div></md-input-container><div class=forgot-password-btn><a ui-sref=confirm_email class=forgot_password>Забыли пароль?</a></div><div class=button-wrap><md-button ui-sref=home class=md-raised>Назад</md-button><md-button type=submit class=\\\"md-primary md-raised\\\">Вход</md-button></div></form></div></div>\");\n$templateCache.put(\"app/auth/sign_up/partials/confirmation_email.html\",\"<div flex layout=column layout-align=\\\"center center\\\" class=auth-wrap><div class=logo><a ui-sref=home>Money Monitoring</a></div><div class=done><div class=md-headline>Регистрация почти завершена!</div><div class=md-subhead>Для подтверждения регистрации на указанный вами email адрес было выслано письмо с дальнейшими инструкциями. Обратите внимание, что письма иногда попадают в спам.</div></div></div>\");\n$templateCache.put(\"app/auth/sign_up/partials/sign_up.html\",\"<div flex layout=column layout-align=\\\"center center\\\" class=auth-wrap><div class=logo><a ui-sref=home>Money Monitoring</a></div><h2 class=md-display-1>Регистрация</h2><div class=\\\"md-subhead align-center\\\">Введите существующий email адрес.</div><div class=form-wrap><form name=sign_up.signUpForm ng-submit=sign_up.registration()><md-input-container class=md-block><label>Email</label><input required input-errors pattern={{sign_up.regExpEmail}} type=email name=email ng-model=sign_up.user.email autocomplete=new-email><div ng-messages=sign_up.signUpForm.email.$error><div ng-message=pattern>Не корректный email адрес.</div><div ng-message=email><span ng-bind=sign_up.errors.errors.email></span></div></div></md-input-container><md-input-container class=md-block><label>Пароль</label><input required input-errors type=password name=password ng-model=sign_up.user.password minlength=6 autocomplete=new-password><div ng-messages=sign_up.signUpForm.password.$error><div ng-message=minlength>Пароль не может быть меньше 6 символов!</div><div ng-message=password><span ng-bind=sign_up.errors.errors.password></span></div></div></md-input-container><md-input-container class=md-block><label>Повторите пароль</label><input required confirm-password type=password name=password_confirmation ng-model=sign_up.user.password_confirmation autocomplete=new-password><div ng-messages=sign_up.signUpForm.password_confirmation.$error><div ng-message=password_confirmation>Должно соответствовать паролю.</div></div></md-input-container><div class=button-wrap><md-button ui-sref=home class=md-raised>Назад</md-button><md-button type=submit class=\\\"md-primary md-raised\\\" ng-disabled=sign_up.signUpForm.$invalid>Зарегистрироваться</md-button></div></form></div></div>\");\n$templateCache.put(\"app/auth/sign_up/partials/verify_email.html\",\"<div flex layout=column layout-align=\\\"center center\\\" class=auth-wrap><div class=logo><a ui-sref=home>Money Monitoring</a></div><div class=done><div ng-bind=sign_up.title class=md-headline></div><div ng-bind=sign_up.content class=md-subhead></div><div ng-if=sign_up.verify_status class=button-wrap><md-button ui-sref=sign_in class=\\\"md-primary md-raised\\\">Войти</md-button></div></div></div>\");}]);"],"sourceRoot":"/source/"}